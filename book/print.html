<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The PLCnext Runtime</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="theme/first-edition.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded affix "><a href="title-page.html">The PLCnext Runtime</a></li><li class="expanded affix "><a href="edition-notice.html">Copyright Notice</a></li><li class="expanded affix "><a href="acknowledgments.html">Acknowledgments</a></li><li class="expanded affix "><a href="ch00-00-introduction.html">Introduction</a></li><li class="expanded "><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="expanded "><a href="ch01-01-ip-address.html"><strong aria-hidden="true">1.1.</strong> Setting the IP Address</a></li><li class="expanded "><a href="ch01-02-shell-session.html"><strong aria-hidden="true">1.2.</strong> Starting a Shell Session</a></li><li class="expanded "><a href="ch01-03-hello-world.html"><strong aria-hidden="true">1.3.</strong> Hello, World!</a></li><li class="expanded "><a href="ch01-04-installing-a-software-development-kit.html"><strong aria-hidden="true">1.4.</strong> Installing a Software Development Kit</a></li><li class="expanded "><a href="ch01-05-hello-again-world.html"><strong aria-hidden="true">1.5.</strong> Hello Again, World!</a></li></ol></li><li class="expanded "><a href="ch02-00-operating-system.html"><strong aria-hidden="true">2.</strong> Operating System</a></li><li><ol class="section"><li class="expanded "><a href="ch02-01-security.html"><strong aria-hidden="true">2.1.</strong> Security</a></li><li class="expanded "><a href="ch02-02-users-and-privileges.html"><strong aria-hidden="true">2.2.</strong> Users and Privileges</a></li><li class="expanded "><a href="ch02-03-setting-the-time.html"><strong aria-hidden="true">2.3.</strong> Setting the Time</a></li><li class="expanded "><a href="ch02-04-firmware.html"><strong aria-hidden="true">2.4.</strong> Firmware</a></li><li class="expanded "><a href="ch02-05-file-system.html"><strong aria-hidden="true">2.5.</strong> File System</a></li><li class="expanded "><a href="ch02-06-installing-software.html"><strong aria-hidden="true">2.6.</strong> Installing Software</a></li></ol></li><li class="expanded "><a href="ch03-00-plcnext-runtime.html"><strong aria-hidden="true">3.</strong> PLCnext Runtime</a></li><li><ol class="section"><li class="expanded "><a href="ch03-01-controlling-the-plcnext-runtime.html"><strong aria-hidden="true">3.1.</strong> Controlling the PLCnext Runtime</a></li><li class="expanded "><a href="ch03-02-plcnext-runtime-components.html"><strong aria-hidden="true">3.2.</strong> PLCnext Runtime Components</a></li><li class="expanded "><a href="ch03-03-component-instances.html"><strong aria-hidden="true">3.3.</strong> Component Instances</a></li><li class="expanded "><a href="ch03-04-disabling-features.html"><strong aria-hidden="true">3.4.</strong> Disabling Features</a></li><li class="expanded "><a href="ch03-05-rsc-services.html"><strong aria-hidden="true">3.5.</strong> RSC Services</a></li></ol></li><li class="expanded "><a href="ch04-00-extension-components.html"><strong aria-hidden="true">4.</strong> Extension Components</a></li><li><ol class="section"><li class="expanded "><a href="ch04-01-simple-component.html"><strong aria-hidden="true">4.1.</strong> Simple Extension Component</a></li><li class="expanded "><a href="ch04-02-component-methods.html"><strong aria-hidden="true">4.2.</strong> Component Methods</a></li><li class="expanded "><a href="ch04-03-library-singleton.html"><strong aria-hidden="true">4.3.</strong> Component Library Singleton</a></li><li class="expanded "><a href="ch04-04-component-example.html"><strong aria-hidden="true">4.4.</strong> Component Example: TCP Server</a></li><li class="expanded "><a href="ch04-05-using-rsc-services.html"><strong aria-hidden="true">4.5.</strong> Using RSC Services</a></li><li class="expanded "><a href="ch04-06-worker-threads.html"><strong aria-hidden="true">4.6.</strong> Worker Threads</a></li><li class="expanded "><a href="ch04-07-interactive-course.html"><strong aria-hidden="true">4.7.</strong> Interactive Course</a></li><li class="expanded "><a href="ch04-08-creating-rsc-services.html"><strong aria-hidden="true">4.8.</strong> Creating RSC Services</a></li><li class="expanded "><a href="ch04-09-creating-gds-variables-1.html"><strong aria-hidden="true">4.9.</strong> Creating GDS variables - Part 1</a></li><li class="expanded "><a href="ch04-10-plcnext-cli.html"><strong aria-hidden="true">4.10.</strong> PLCnext CLI</a></li><li class="expanded "><a href="ch04-11-creating-gds-variables-2.html"><strong aria-hidden="true">4.11.</strong> Creating GDS variables - Part 2</a></li><li class="expanded "><a href="ch04-12-connecting-gds-variables.html"><strong aria-hidden="true">4.12.</strong> Connecting GDS Variables</a></li><li class="expanded "><a href="ch04-13-rest-api.html"><strong aria-hidden="true">4.13.</strong> REST API</a></li></ol></li><li class="expanded "><a href="ch05-00-real-time-programming.html"><strong aria-hidden="true">5.</strong> Real Time Programming</a></li><li><ol class="section"><li class="expanded "><a href="ch05-01-cpp-programs.html"><strong aria-hidden="true">5.1.</strong> C++ Programs</a></li><li class="expanded "><a href="ch05-02-configuring-io.html"><strong aria-hidden="true">5.2.</strong> Configuring I/O</a></li><li class="expanded "><a href="ch05-03-iec-programs.html"><strong aria-hidden="true">5.3.</strong> IEC 61131-3 Programs</a></li></ol></li><li class="expanded "><a href="ch06-00-other-tools.html"><strong aria-hidden="true">6.</strong> Other Programming Tools</a></li><li class="expanded "><a href="ch07-00-extension-processes.html"><strong aria-hidden="true">7.</strong> Extension Processes</a></li><li class="expanded "><a href="ch08-00-what-next.html"><strong aria-hidden="true">8.</strong> What Next</a></li><li><ol class="section"><li class="expanded "><a href="ch08-01-the-big-picture.html"><strong aria-hidden="true">8.1.</strong> The Big Picture</a></li><li class="expanded "><a href="ch08-02-get-involved.html"><strong aria-hidden="true">8.2.</strong> Get Involved!</a></li></ol></li><li class="expanded "><a href="appendix-00.html"><strong aria-hidden="true">9.</strong> Appendix</a></li><li><ol class="section"><li class="expanded "><a href="appendix-01-programming-resources.html"><strong aria-hidden="true">9.1.</strong> A - Programming Resources</a></li><li class="expanded "><a href="appendix-02-list-of-rsc-services.html"><strong aria-hidden="true">9.2.</strong> B - RSC Services</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">The PLCnext Runtime</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div style="text-align:center">
<h1><a class="header" href="#the-plcnext-runtime" id="the-plcnext-runtime">The PLCnext Runtime</a></h1>
<br/>
<br/>
<!--<p><img src="img/plcnext-runtime.gif" alt="PLCnext Runtime logo" style="width:300px;height:300px;"></p>-->
<br/>
<h2><a class="header" href="#iby-martin-boersi" id="iby-martin-boersi"><i>by Martin Boers</i></a></h2>
<br/>
</div>
<p>The PLCnext Runtime © 2020-2021 Martin Boers</p>
<p>PLCnext Technology, PLCnext Engineer, PLCnext Store and Proficloud are registered trade marks of Phoenix Contact GmbH &amp; Co. KG.</p>
<p>This book is not produced, supported or endorsed by Phoenix Contact GmbH &amp; Co. KG or any of its associated companies.</p>
<p>While every effort has been made to ensure the accuracy of material in this book, the author accepts no responsibility for any errors or omissions.</p>
<p>The content of this book is subject to change without notice.</p>
<h1><a class="header" href="#acknowledgments" id="acknowledgments">Acknowledgments</a></h1>
<p>The following people have provided invaluable support in the creation of this book:</p>
<ul>
<li>
<p><a href="https://github.com/idzm">Dzmitry Ivaniuk</a> at <a href="https://github.com/savushkin-r-d">Savushkin R&amp;D</a>.</p>
</li>
<li>
<p>Frank Walde and Heiko Hüllwegen at Phoenix Contact Electronics.</p>
</li>
</ul>
<h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>Welcome to <em>The PLCnext Runtime</em>, an introductory book about programming on the PLCnext Control platform.</p>
<h2><a class="header" href="#what-is-plcnext-control" id="what-is-plcnext-control">What Is PLCnext Control?</a></h2>
<p>PLCnext Control refers to a range of embedded computers from Phoenix Contact, which are designed for automating industrial processes. These controllers share some characteristics with popular single-board computers, but PLCnext Control devices includes features that make them particularly suitable for industrial applications.</p>
<p>The PLCnext Control range currently includes the following hardware variants from the AXC<sup>1</sup>, EPC<sup>2</sup> and RFC<sup>3</sup> range:</p>
<ul>
<li><a href="http://www.phoenixcontact.com/product/1151412">AXC F 1152</a> (ARM® Cortex®-A9 2x 800 MHz)</li>
<li><a href="http://www.phoenixcontact.com/product/2404267">AXC F 2152</a> (ARM® Cortex®-A9 2x 800 MHz, PCIe® connector)</li>
<li><a href="http://www.phoenixcontact.com/product/1069208">AXC F 3152</a> (Intel® Atom™ x5-E3930 1.3 GHz Dual Core)</li>
<li><a href="http://www.phoenixcontact.com/product/1185416">EPC 1502</a> (Intel® Celeron® N3350 1.10/2.40 GHz, 2GB RAM)</li>
<li><a href="http://www.phoenixcontact.com/product/1185423">EPC 1522</a> (Intel® Celeron® N3350 1.10/2.40 GHz, 4GB RAM, 2x DB9 COM ports)</li>
<li><a href="http://www.phoenixcontact.com/product/1051328">RFC 4072S</a> (Intel® Core™ i5-6300U 2x 2.4 GHz + separate safety processors)</li>
<li><a href="http://www.phoenixcontact.com/product/1246285">BPC 9102S</a> (Intel® Core™ i7-10700TE 8x 2.4 GHz + separate safety processors)</li>
</ul>
<p>Each of these hardware platforms runs custom firmware that is based on Linux kernel version 5.4 with the <a href="https://wiki.linuxfoundation.org/realtime/start">PREEMT-RT patch</a>.</p>
<h2><a class="header" href="#who-plcnext-control-is-for" id="who-plcnext-control-is-for">Who PLCnext Control Is For</a></h2>
<p>PLCnext Control is ideal for software and systems engineers involved in the automation of industrial processes.</p>
<p>Controllers from the PLCnext Control range can perform the role of traditional PLCs<sup>4</sup>, however they also include features that will be familiar to software engineers with a more general programming background.</p>
<h3><a class="header" href="#iec-61131-3-software-developers" id="iec-61131-3-software-developers">IEC 61131-3 Software Developers</a></h3>
<p>Traditional PLCs generally can be programmed using any language defined by the IEC 61131-3 standard. Controllers from the PLCnext Control range are no different. For these developers, Phoenix Contact provides <a href="http://www.phoenixcontact.com/product/1046008"><em>PLCnext Engineer</em></a> software.</p>
<h3><a class="header" href="#simulink-software-developers" id="simulink-software-developers">Simulink® Software Developers</a></h3>
<p>Simulink® is software for graphical, model-based development of dynamic systems. Simulink® models can be integrated into the PLCnext Engineer development environment using the <a href="http://www.phoenixcontact.com/product/2400041"><em>PC Worx Target for Simulink</em></a> software add-on.</p>
<h3><a class="header" href="#software-engineers-with-experience-in-cc-rust-c-java-python-javascript-html5-go-etc" id="software-engineers-with-experience-in-cc-rust-c-java-python-javascript-html5-go-etc">Software engineers with experience in C/C++, Rust, C#, Java, Python, Javascript, HTML5, Go, etc</a></h3>
<p>Custom software applications written in any popular programming language can be run on the controller. These applications can make use of PLCnext runtime services if required.</p>
<h3><a class="header" href="#systems-integrators-and-network-administrators" id="systems-integrators-and-network-administrators">Systems integrators and network administrators</a></h3>
<p>It is possible to simply install and configure pre-built applications on a PLCnext Control device, without any software engineering effort.</p>
<h3><a class="header" href="#project-teams-with-some-or-all-of-the-above-skills" id="project-teams-with-some-or-all-of-the-above-skills">Project teams with some or all of the above skills</a></h3>
<p>PLCnext Control devices includes unique features - such as the Global Data Space (GDS) and the Execution and Synchronisation Manager (ESM) - that make it possible to combine components written in different languages into a single project.</p>
<h2><a class="header" href="#who-this-book-is-for" id="who-this-book-is-for">Who This Book Is For</a></h2>
<p>This book is aimed at software developers who want to extend the functionality of a PLCnext Control device with their own software. The book contains program examples and references in a number of popular languages, but generally uses C++ to demonstrate the features of PLCnext Control. C++ is used because PLCnext Control provides a C++ programming framework, and many of the open-source projects that are suitable for PLCnext Control projects are also written in C++. However, software engineers with other programming skills should be able to apply the principles found in this book to their language of choice. For these programmers, appendix A gives references to language-specific resources.</p>
<p>This book does not cover PLCnext Engineer or programming in IEC 61131-3 languages, and in fact it is not necessary to read this book in order to become proficient in PLCnext Control programming using PLCnext Engineer. For IEC 61131-3 programmers, there are other resources from Phoenix Contact that will help you get started with PLCnext Engineer.</p>
<p>For systems integrators who don't want to write their own software, but who want to install and configure third-party software on a PLCnext Control - you will be most interested in Chapters 1 and 2.</p>
<p>For systems and network administrators who will be managing PLCnext Control devices - you will also find Chapters 1 and 2 useful.</p>
<h2><a class="header" href="#what-you-will-need" id="what-you-will-need">What You Will Need</a></h2>
<p>Obviously, you will need a controller from the PLCnext Control range. These are available for purchase from your local Phoenix Contact subsidiary, or from a number of online automation resellers. You will need to power the controller with a 24 VDC supply. A good option is the <a href="http://www.phoenixcontact.com/product/1188165">PLCnext Technology Starter Kit</a>, which includes an AXC F 2152 controller, a 24 VDC power supply unit with pre-wired mains plug, and digital and analog input/output (I/O) modules.</p>
<p>All sections of this book apply to AXC F 1152 and 2152 devices, and most sections also apply to other PLCnext Control devices.</p>
<p>A PLCnext Control device is a <em>target</em> (in embedded programming terminology), and it requires a <em>host</em>. This book uses Debian 11 as the host machine, but any popular Linux distribution - or even Microsoft Windows - should also work. Windows commands are not shown in this book, so Windows users should consider installing [Windows Subsystem for Linux][wsl] to work along with this book.</p>
<p>The host machine must be connected to the internet. The host machine requires certain software development tools to be installed, and these will be described in the relevant sections of this book.</p>
<p>The controller must be connected to a local area network with access to both the internet and the host machine. Note that the controller does not include a wireless network adapter.</p>
<p>A knowledge of Ethernet networking would also be beneficial. The book &quot;<a href="https://www.phoenixcontact.com/assets/downloads_ed/global/web_dwl_technical_info/Ethernet_Basics_rev2_en.pdf">Ethernet Basics</a>&quot; by Phoenix Contact is recommended for this purpose.</p>
<blockquote>
<p>Throughout this book, the PLCnext Control hardware will be referred to as either <em>PLCnext Control device</em>, or <em>controller</em>, or <em>target</em>. In this book, these terms are used interchangeably. Controllers from other manufacturers are often referred to with the term  <em>PLC</em>, but in this book the term <em>PLC</em> will only be used to refer to those firmware components on the controller that implement real-time automation functions.</p>
</blockquote>
<h2><a class="header" href="#how-to-use-this-book" id="how-to-use-this-book">How to Use This Book</a></h2>
<p>This book should be read from front to back. It is not intended to be an exhaustive reference; that is provided by the <a href="https://www.plcnext.help/te/About/Home.htm">PLCnext Technology Info Centre</a>. Instead, this book will draw on material in relevant sections of the Info Center, and elsewhere, to build up the readers knowledge in incremental steps.</p>
<p>Chapter 1 explains how to get started with a PLCnext Control device, from setting the IP address to writing your first &quot;Hello, World!&quot; programs in Python, C++ and Rust. Chapter 2 introduces the PLCnext runtime by exploring the complete set of PLCnext runtime components that are installed with the firmware.</p>
<p>In Chapter 3, you will write your own PLCnext runtime extension component in C++. You will learn how extension components can use PLCnext runtime services, how they can provide their own services to other components, and how they can exchange data with other components through the global data space.</p>
<p>Chapter 4 introduces real-time programming on PLCnext Control devices. You will write a C++ program and configure the execution and synchronisation manager to run the program in a real-time PLC task. You will also learn how a real-time program can read and write process data on Axioline I/O modules attached to the controller.</p>
<p>Chapter 5 looks at some additional tools that can help with PLCnext runtime programming.</p>
<p>Chapter 6 is for developers who want to port an existing runtime to a PLCnext Control device, or write a completely new runtime. You will learn how external runtimes can access the I/O that is connected to the controller, and how they can continue to utilise services provided by the PLCnext runtime.</p>
<p>A glossary of terms used in this book is available in the <a href="https://www.plcnext.help/te/About/Home.htm?agt=glossary">PLCnext Technology Info Center</a>.</p>
<blockquote>
<h3><a class="header" href="#command-line-notation" id="command-line-notation">Command Line Notation</a></h3>
<p>Throughout this book, you will see commands that must be entered into a terminal on either the host or the target.</p>
<p>Commands in a terminal on the host all start with <code>$</code> (you don’t need to enter the <code>$</code> character).</p>
<p>Commands in a terminal on the target all start with <code>#</code> (you don’t need to enter the <code>#</code> character).</p>
<p>Commands in a terminal running the python interpreter all start with <code>&gt;&gt;&gt;</code> (you don’t need to enter the <code>&gt;&gt;&gt;</code> characters).</p>
<p>Lines that don’t start with <code>$</code>, <code>#</code> or <code>&gt;&gt;&gt;</code> typically show the output of the previous command.</p>
</blockquote>
<h2><a class="header" href="#versions" id="versions">Versions</a></h2>
<p>This book will be kept up to date with the latest release of PLCnext Control firmware. As soon as a new version of PLCnext Control firmware is released, the book source code will be tagged with the version number of the firmware that has just been superseded.</p>
<h2><a class="header" href="#source-code" id="source-code">Source Code</a></h2>
<p>The source files used to generate this book can be found on <a href="https://github.com/martinboers/plcnext-book/tree/master/src">GitHub</a>.</p>
<hr />
<p><sup>1</sup> <em>AXC</em> is short for <em>Axioline Controller</em>, indicating that the controller has a dedicated hardware interface to connect directly to the Axioline range of I/O modules. <em>Axioline</em> is derived from the terms <em>AutomationWorx</em> (AX), a brand name used by Phoenix Contact, and <em>I/O</em>, meaning <em>Input/Output</em>. The term <em>line</em> can be taken to refer to a line of products, but in this case it was inherited from an earlier range of Phoenix Contact products called <em>Inline</em>. The letter &quot;F&quot; after &quot;AXC&quot; is used to distinguish these devices from earlier Axioline controllers, but otherwise has no meaning.</p>
<p><sup>2</sup> <em>EPC</em> is short for <em>Edge Personal Computer</em>. EPCs combine real-time PLC features with popular Industrial Internet of Things (IIoT) applications like <a href="https://nodered.org/">Node-RED</a> and <a href="https://www.influxdata.com/">InfluxDB</a>. EPCs are designed for industrial <a href="https://en.wikipedia.org/wiki/Edge_computing">Edge computing</a> applications.</p>
<p><sup>3</sup> <em>RFC</em> is short for <em>Remote Field Controller</em>. Unlike Axioline controllers, RFCs can only control <em>remote</em> I/O modules over a <em>field bus</em> like Profinet.</p>
<p><sup>4</sup> <em>PLC</em> is short for <a href="https://en.wikipedia.org/wiki/Programmable_logic_controller"><em>Programmable Logic Controller</em></a>.</p>
<h1><a class="header" href="#getting-started" id="getting-started">Getting Started</a></h1>
<p>This chapter includes:</p>
<ul>
<li>
<p>Setting the controller's IP address</p>
</li>
<li>
<p>Starting a shell session</p>
</li>
<li>
<p>Writing a Python program that prints <code>Hello, world!</code></p>
</li>
<li>
<p>Installing a software development kit</p>
</li>
<li>
<p>Writing C++ and Rust programs that print <code>Hello, world!</code></p>
</li>
<li>
<p>Updating the firmware</p>
</li>
<li>
<p>Exploring the file system</p>
</li>
<li>
<p>Installing software</p>
</li>
</ul>
<h2><a class="header" href="#setting-the-ip-address" id="setting-the-ip-address">Setting the IP Address</a></h2>
<p>Once you have assembled <a href="ch00-00-introduction.html#what-you-will-need">everything you need to get started</a>, your PLCnext Control device will be powered up and plugged in to an Ethernet network with access to the internet. On <strong>AXC F 1152</strong> and <strong>AXC F 2152</strong> PLCnext Control devices it doesn't matter which of the two Ethernet ports are used; these are switched internally.</p>
<p>The factory default IP address of every PLCnext Control device is 192.168.1.10/24, but you will probably want to change this to something that suits your local network.</p>
<blockquote>
<p>This section shows how to change the IP address of the PLCnext Control device from the default value. In the remainder of this book, all examples will use the default IP address (192.168.1.10).</p>
</blockquote>
<p>Here are some possible ways to change the IP address of the PLCnext Control device:</p>
<h3><a class="header" href="#use-netnames" id="use-netnames">Use netnames</a></h3>
<p>Netnames is a utility from Phoenix Contact that assists with the management of <a href="https://www.profibus.com/technology/profinet/">Profinet</a> devices. Netnames is available for <a href="http://plcnext-runtime.com/downloads/netnames/linux-x64/netnames">Linux 64 bit</a> and <a href="http://www.phoenixcontact.com/qr/2316390/softw">Windows</a> operating systems. The remainder of this section uses the Linux version of Netnames.</p>
<p>Firstly, make sure that netnames can be executed. From the <code>netnames</code> installation directory, run the following command:</p>
<pre><code class="language-text">$ chmod a+x netnames
</code></pre>
<p>By default, each PLCnext Control device acts as a Profinet device, and so can be assigned an IP address using <code>netnames</code>.</p>
<p>Run the following command, substituting <code>eth0</code> with the name of your Ethernet adapter. You should get a response similar to the one shown.</p>
<pre><code class="language-text">$ sudo ./netnames -i eth0 -c identify
axc-f-2152-1   AXC F 2152   00B0 0142 00:A0:45:A0:09:D8   192.168.1.10   255.255.255.0   0.0.0.0
</code></pre>
<p>The MAC address and current IP address details of the PLCnext Control device are shown in the response.</p>
<p>If you get no response, make sure the name of the Ethernet adapter is correct. Also, be aware that the <a href="https://profinetuniversity.com/naming-addressing/profinet-dcp/">Discovery and Configuration Protocol</a> (DCP) used by <code>netnames</code> is a link layer protocol, and so is not routable.</p>
<p>The IP address, subnet mask and default gateway can be changed using a command similar to the following:</p>
<pre><code class="language-text">$ sudo ./netnames -i eth0 -c setip -m 00:A0:45:A0:09:D8 -ip 192.168.178.10 -sm 255.255.255.0 -sg 192.168.178.1
Device responded: OK
</code></pre>
<p>Obviously the above command will need to include parameters that suit your own device and network. The IP address of the device should be in the same subnet as the host, and the default gateway should give the device access to the internet.</p>
<p>Your device should now be accessible from your host machine, which can be verified using <code>ping</code>:</p>
<pre><code class="language-text">$ ping -c 3 192.168.178.10
PING 192.168.178.10 (192.168.178.10) 56(84) bytes of data.
64 bytes from 192.168.178.10: icmp_seq=1 ttl=64 time=5.73 ms
64 bytes from 192.168.178.10: icmp_seq=2 ttl=64 time=4.87 ms
64 bytes from 192.168.178.10: icmp_seq=3 ttl=64 time=18.4 ms

--- 192.168.178.10 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2010ms
rtt min/avg/max/mdev = 4.877/9.690/18.464/6.214 ms
</code></pre>
<h3><a class="header" href="#use-the-display-rfc-only" id="use-the-display-rfc-only">Use the Display (RFC only)</a></h3>
<p>RFC controllers come with an integrated touch-screen display, which can be used to set the controller's IP address.</p>
<h3><a class="header" href="#use-plcnext-engineer" id="use-plcnext-engineer">Use PLCnext Engineer</a></h3>
<p>For Windows users, it is also possible to set the IP address of the PLCnext Control device using <a href="http://phoenixcontact.com/product/1046008">PLCnext Engineer</a> software. Refer to the guide &quot;<a href="https://www.plcnext.help/te/PLCnext_Engineer/Getting_started_with_PLCnext_Engineer.htm">Getting started with PLCnext Engineer</a>&quot; for instructions on how to do this.</p>
<h3><a class="header" href="#edit-the-interfaces-file" id="edit-the-interfaces-file">Edit the interfaces file</a></h3>
<p>Once the device is accessible over the network via <code>ssh</code> (for example), it is possible to change the IP address of the device by editing the file <code>/etc/network/interfaces</code> directly on the device.</p>
<h2><a class="header" href="#starting-a-shell-session" id="starting-a-shell-session">Starting a Shell Session</a></h2>
<p>The PLCnext Control device is running a secure shell (ssh) daemon so, once the device is accessible on the local area network, you can go ahead and open a shell session on the device from the host:</p>
<pre><code class="language-text">$ ssh admin@192.168.1.10
The authenticity of host '192.168.1.10 (192.168.1.10)' can't be established.
ECDSA key fingerprint is SHA256:uUhWsqX6TQy/KDZ4rdydja8zws7zCBLF5CI2/wm5owQ.
Are you sure you want to continue connecting (yes/no)?
</code></pre>
<p>You are requesting to log on to the PLC as the user <em>admin</em>. This user is set up by default on every PLCnext Control. The warning about the authenticity of the host is normal when using <code>ssh</code> to connect to a device for the first time. By answering <code>yes</code> to the question, the following appears:</p>
<pre><code class="language-text">Warning: Permanently added '192.168.1.10' (ECDSA) to the list of known hosts.
admin@192.168.1.10's password:
</code></pre>
<p>... and after entering the default password (printed on the housing of the PLC), the PLC's command prompt will appear:</p>
<pre><code class="language-text">admin@axcf2152:~$
</code></pre>
<h2><a class="header" href="#hello-world" id="hello-world">Hello, World!</a></h2>
<p>Let's write our first PLCnext Control program!</p>
<h3><a class="header" href="#your-first-program" id="your-first-program">Your First Program</a></h3>
<p>Every PLCnext Control device comes with Python already installed.</p>
<pre><code class="language-text"># python3
Python 3.7.2 (default, Nov 12 2019, 23:37:48)
[GCC 8.3.0] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</code></pre>
<p>Here, you can see the version of Python that is installed on the device. The Python command prompt <code>&gt;&gt;&gt;</code> is now waiting for further input. Enter the following command:</p>
<pre><code class="language-text">&gt;&gt;&gt; print (&quot;Hello, World!&quot;)
Hello, World!
</code></pre>
<p>Press Ctrl-D to exit from the Python interpreter and return to the command prompt.</p>
<p>Close the shell session:</p>
<pre><code class="language-text"># exit
</code></pre>
<p>You have just written your first PLCnext Control program!</p>
<h3><a class="header" href="#your-second-program" id="your-second-program">Your Second Program</a></h3>
<p>You probably don't want to be limited to Python when building applications. Python scripts are quick and easy to run on a PLCnext Control device because the firmware includes a Python interpreter. Other interpreted languages (like Javascript) need their own interpreter. Similarly, Java bytecode and .NET CLI code need their own runtimes. It is beyond the scope of this book to describe how to program a PLCnext Control device in every language. Appendix A includes a list of resources that demonstrate how to use PLCnext Control devices with a number of popular programming languages and frameworks, including contributions from members of the PLCnext Community.</p>
<p>Native applications can be built for a PLCnext Control device using C/C++ or Rust, for example, with the help of the appropriate Software Development Kit (SDK). Next, we will see how to install the SDK for a PLCnext Control device on your host machine, and then write &quot;Hello, World!&quot; programs for that controller in C/C++ and Rust.</p>
<h2><a class="header" href="#installing-a-software-development-kit" id="installing-a-software-development-kit">Installing a Software Development Kit</a></h2>
<p>You can build native applications for a PLCnext Control device - either from third-party open-source code, or from your own code. To do this, you must install a software development kit (SDK) on the host, corresponding to the firmware that is running on the PLCnext Control device. The SDK contains the build tools and other resources required to create native applications for the target.</p>
<h3><a class="header" href="#plcnext-command-line-interface" id="plcnext-command-line-interface">PLCnext Command Line Interface</a></h3>
<p>Software development kits for PLCnext Control targets are installed and managed using a command-line interface (CLI), called the <em>PLCnext CLI</em> or <code>plcncli</code>. It is possible to install SDKs on the host without using <code>plcncli</code>, but <code>plcncli</code> provides important features that will be required in later chapters of this book. For this reason, it is highly recommended to install and manage SDKs using <code>plcncli</code>.</p>
<p>To install <code>plcncli</code> on your host:</p>
<ul>
<li>
<p>Download the file <em>PLCnext Technology C++ tool chain for Linux</em> from the Phoenix Contact website. For example, the file <code>PLCnCLI_SDK_2021.6_Linux_AXC_F_2152.tar.gz</code> is for the AXC F 2152 running firmware version 2021.6.</p>
</li>
<li>
<p>Extract the files from the archive.</p>
</li>
<li>
<p>In a terminal window, navigate to the directory where the files were extracted.</p>
</li>
<li>
<p>Optional: See what commands are available </p>
</li>
<li>
<p>Run the script to set up <code>plcncli</code> on the host, specifying the directory where the package should be installed.</p>
<pre><code class="language-text">$ ./PLCnCLI_Setup.sh --target ~/plcncli
</code></pre>
<p>Read the terms and conditions carefully and, if you agree with them, type <code>y</code>.</p>
</li>
<li>
<p>Create a symbolic link to the <code>plcncli</code> executable, as suggested by the installation message.</p>
</li>
<li>
<p>Check that the installation has been successful.</p>
<pre><code class="language-text">$ plcncli
plcncli 21.6.0 (21.6.0.726)
Copyright (c) 2018 PHOENIX CONTACT GmbH &amp; Co. KG
</code></pre>
</li>
</ul>
<h3><a class="header" href="#plcnext-sdk" id="plcnext-sdk">PLCnext SDK</a></h3>
<ul>
<li>
<p>In a terminal window, navigate to the directory where the files were extracted from the archive.</p>
</li>
<li>
<p>Use plcncli to install the SDK. You are free to specify any destination directory you want, using the <code>-d</code> option.</p>
<pre><code class="language-text">$ plcncli install sdk -p pxc-glibc-x86_64-axcf2152-image-sdk-cortexa9t2hf-neon-axcf2152-toolchain-2021.6.sh -d /opt/pxc/sdk/AXCF2152/2021.6
(todo: response))
</code></pre>
<p>You may need to change the permissions on the SDK installation file to give the current user execute privilege.</p>
</li>
<li>
<p>Check what SDKs and targets have been installed.</p>
<pre><code class="language-text">$ plcncli get sdks
{
   &quot;sdks&quot;: [
      {
         &quot;path&quot;: &quot;/opt/pxc/sdk/AXCF2152/2021.6&quot;
      }
   ]
}
</code></pre>
<pre><code class="language-text">$ plcncli get targets
{
   &quot;targets&quot;: [
      {
         &quot;name&quot;: &quot;AXCF2152&quot;,
         &quot;version&quot;: &quot;21.6.0.46&quot;,
         &quot;longVersion&quot;: &quot;2021.6.0 (21.6.0.46)&quot;,
         &quot;shortVersion&quot;: &quot;21.6.0&quot;,
         &quot;available&quot;: null
      }
   ]
}
</code></pre>
</li>
</ul>
<p>Note that the above responses are in JSON format, which makes it easier to integrate plcncli operations into an automated workflow if required.</p>
<p>If you need to build applications for different PLCnext Control hardware and/or firmware variants, then it is possible to use <code>plcncli</code> to install multiple SDKs on the host. To do this, simply repeat the installation procedure for each additional SDK. There is no need to install <code>plcncli</code> again.</p>
<h3><a class="header" href="#alternative-sdk-installation-methods" id="alternative-sdk-installation-methods">Alternative SDK installation methods</a></h3>
<p>If you are writing C++ applications in Eclipse or Visual Studio, then it is possible to install PLCnext SDKs through those IDEs. All SDK installation methods are described in the <a href="https://www.plcnext.help/te/Programming/Cpp/Cpp_programming/Required_Installations.htm">PLCnext Info Center</a>.</p>
<h2><a class="header" href="#hello-again-world" id="hello-again-world">Hello Again, World!</a></h2>
<p>Once you have an SDK installed on your host machine, your PLCnext Control device can greet the world in C++ or Rust.</p>
<h3><a class="header" href="#c" id="c">C++</a></h3>
<p>On the host machine, create a file called <code>main.cpp</code> with the following contents:</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;

int main() {
    std::cout &lt;&lt; &quot;Hello World!&quot; &lt;&lt; std::endl;
    return 0;
}
</code></pre>
<p>When <a href="https://www.gnu.org/software/automake/manual/html_node/Cross_002dCompilation.html">cross-compiling</a> open-source C/C++ code using the <a href="https://www.gnu.org/software/automake/manual/html_node/GNU-Build-System.html">GNU Build System</a>, it is typical - and often necessary - to define an environment variable called <code>SDKROOT</code>. This variable contains the path where header files, shared libraries, build tools etc. for the target platform can be found. Defining this variable is not necessary for this simple example, but let's do it anyway. In this case, we define <code>SDKROOT</code> as the directory in the SDK that contains the <code>sysroot</code> directory. For example:</p>
<pre><code class="language-text">$ export SDKROOT=/opt/pxc/sdk/AXCF2152/2021.6
</code></pre>
<p>The PLCnext SDK includes a bash script that sets up the build environment, so that standard build commands will result in binaries for the target platform. Execute this bash script using the <code>source</code> command:</p>
<pre><code class="language-text">$ source ${SDKROOT}/environment-setup*
</code></pre>
<p>Now we can compile and link the program using the g++ compiler that comes with the PLCnext SDK:</p>
<pre><code class="language-text">$ $CXX main.cpp -O -o say_hello  # Build with optimisations (-O) to avoid a warning.
</code></pre>
<p>Check that the resulting executable has been built for the correct platform:</p>
<pre><code class="language-text">$ file say_hello
say_hello: ELF 32-bit LSB pie executable, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-armhf.so.3, BuildID[sha1]=b4a827997b3375494f750fa890c8796ff293d463, for GNU/Linux 3.2.0, with debug_info, not stripped
</code></pre>
<p>Copy the executable to the PLCnext Control device:</p>
<pre><code class="language-text">$ scp say_hello admin@192.168.1.10:~
</code></pre>
<p>Run the program on the PLCnext Control device:</p>
<pre><code class="language-text">$ ssh admin@192.168.1.10
# ./say_hello
Hello World!
</code></pre>
<p>Congratulations! You have just run your first C++ program on a PLCnext Control device.</p>
<h3><a class="header" href="#rust" id="rust">Rust</a></h3>
<p>The build process for a simple Rust program targeting a PLCnext Control device is described in the <a href="https://github.com/PLCnext/rust-sample-runtime/blob/master/getting-started/Part-01/README.md">first step of the rust-sample-runtime tutorial in Github</a>.</p>
<h3><a class="header" href="#building-on-target" id="building-on-target">Building on target</a></h3>
<p>The software development process for PLCnext Control devices - cross-compiling on a host, then deploying to a target - will be familiar to those with experience in embedded systems software development, but other programmers often wonder why they cannot build their PLCnext Control applications directly on the target device. The reason is that the resources required to run development and build tools are often orders of magnitude greater than those required to run the final application, and the types of applications for which PLCnext Control is designed cannot justify the cost of these additional resources (e.g. memory and CPU power). For this reason, PLCnext Control should be considered more like an embedded device rather than a full-featured computer.</p>
<h3><a class="header" href="#accessing-plc-io" id="accessing-plc-io">Accessing PLC I/O</a></h3>
<p>After writing their first program, one of the first questions most PLCnext Control programmers ask is: How can an application read and write inputs and outputs from/to the I/O modules attached to the PLC?</p>
<p>Before you learn how to do this, you must learn about the <em>PLCnext runtime</em>. But first, you should know about some basic features of the operating system that runs on every PLCnext Control device.</p>
<h2><a class="header" href="#operating-system" id="operating-system">Operating System</a></h2>
<p>The firmware on a PLCnext Control includes standard Linux features that will be familiar to systems and network administrators. These features are described in the <a href="https://www.plcnext.help/te/Operating_System/Operating_system.htm">PLCnext Technology Info Centre</a>.</p>
<p>This chapter describes operating system features that are likely to be useful to developers of PLCnext Control applications. Some of these features are common to all Linux-based operating systems, and some are specific to PLCnext Control devices:</p>
<ul>
<li>Security</li>
<li>Users and Privileges</li>
<li>Firmware, including installing updates</li>
<li>File system</li>
<li>Installing software</li>
</ul>
<h2><a class="header" href="#security" id="security">Security</a></h2>
<p>As is the case with all computer systems, it is ultimately the responsibility of the end user to protect their equipment against all potential threats.</p>
<p>The security tools provided with PLCnext Control firmware are described in the <a href="https://www.plcnext.help/te/Security/Security.htm">PLCnext Technology Info Centre</a>. These tools will be familiar to administrators of Linux devices.</p>
<p>In addition, users should always follow general IT security principles like <a href="https://dam-mdc.phoenixcontact.com/asset/156443151564/0a870ae433c19148b80bd760f3a1c1f2">those published by Phoenix Contact</a> (PDF download).</p>
<h2><a class="header" href="#users-and-privileges" id="users-and-privileges">Users and Privileges</a></h2>
<p>Much of the information below also appears in the <a href="https://www.plcnext.help/te/Operating_System/Root_rights.htm">PLCnext Info Center</a>.</p>
<h3><a class="header" href="#admin-user" id="admin-user">admin user</a></h3>
<p>By default, the <code>admin</code> user is granted the privilege to run a number of commands as a super-user. You can see the complete list of these commands as follows:</p>
<pre><code class="language-text">admin@axcf2152:~$ sudo -l
Password:
User admin may run the following commands on axcf2152:
    (ALL) /usr/bin/passwd
    (ALL) /sbin/ifconfig
    (ALL) /bin/date
    (ALL) /etc/init.d/plcnext
    (ALL) /etc/init.d/openvpn
    (ALL) /etc/init.d/ntpd
    (ALL) /etc/init.d/sshd
    (ALL) /usr/sbin/ipsec
    (ALL) /usr/sbin/swanctl
    (ALL) /etc/init.d/firewall
    (ALL) /usr/sbin/nft
    (ALL) /sbin/ldconfig
    (ALL) /sbin/shutdown
    (ALL) /sbin/reboot
    (ALL) /usr/sbin/tcpdump
    (ALL) /usr/sbin/update-rc.d
    (ALL) /usr/sbin/update-plcnext
    (ALL) /usr/sbin/recover-plcnext
    (ALL) /usr/bin/dpkg
    (ALL) /usr/bin/gdbserver
    (ALL) /usr/bin/gdbserver-plcnext.sh
    (ALL) /usr/bin/gdbserver-preprocess.sh
    (ALL) /usr/bin/gdbserver-prio-request.sh
    (ALL) /usr/bin/gdbserver-prio-set.sh
    (ALL) /usr/bin/gdbserver-start-program-wrapper.sh
    (ALL) /usr/sbin/update-axcf2152
    (ALL) /usr/sbin/recover-axcf2152
    (ALL) /usr/bin/gdbserver-plcnext.sh
    (ALL) /usr/bin/gdbserver-preprocess.sh
    (ALL) /usr/bin/gdbserver-prio-request.sh
    (ALL) /usr/bin/gdbserver-prio-set.sh
    (ALL) /usr/bin/gdbserver-start-program-wrapper.sh
    (ALL) /usr/sbin/sdcard_state.sh
</code></pre>
<p>These sudo privileges are granted using configuration files in the <code>/etc/sudoers.d</code> directory.</p>
<h3><a class="header" href="#extending-admin-privileges" id="extending-admin-privileges">Extending admin privileges</a></h3>
<p>In some cases it may be required to grant the <code>admin</code> user the privilege to execute more commands than those listed above. This can be done by adding one or more files to the <code>/etc/sudoers.d</code> directory.</p>
<p>In the extreme case, it is possible to grant the admin user the right to execute all commands on the controller, by adding a file to the <code>/etc/sudoers.d</code> directory containing the following line:</p>
<pre><code class="language-text">admin ALL=(ALL) ALL
</code></pre>
<p>Note that it is not recommended to edit or delete any file that is installed with the firmware.</p>
<h3><a class="header" href="#root-user" id="root-user">root user</a></h3>
<p>In some cases it may be required to switch to the root user. In this case, a root user password must first be set, using the following command:</p>
<pre><code class="language-text">admin@axcf2152:~$ sudo passwd root

We trust you have received the usual lecture from the local System
Administrator. It usually boils down to these three things:

    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.

Password: *Enter admin user password*

Changing password for root
Enter the new password (minimum of 5 characters)
Please use a combination of upper and lower case letters and numbers.
New password: *Enter root user password*
Re-enter new password: *Confirm password*
</code></pre>
<p>You can now switch to the root user using the command <code>su root</code>, or simply <code>su</code>.</p>
<h3><a class="header" href="#creating-an-ssh-session-as-root" id="creating-an-ssh-session-as-root">Creating an ssh session as root</a></h3>
<p>In some cases, it may be required to connect directly to the controller as <code>root</code>, using <code>ssh</code> or its associated utilities (<code>scp</code>, <code>sftp</code>, etc).</p>
<p>In order to open an ssh session on the controller as <code>root</code>, the ssh daemon must be configured to accept logins from that user. To do this, log in to the controller as <code>admin</code>, switch to the <code>root</code> user using the <code>su</code> command, and edit the <code>/etc/ssh/sshd_config</code> file using your favourite editor.</p>
<blockquote>
<p>The controller includes <code>vi</code> (vim) and <code>nano</code> text editors.
There are many online resources available if you need to learn how to use one these editors.</p>
</blockquote>
<p>In the <code>sshd_config</code> file, remove the comment symbol <code>#</code> from this line:</p>
<pre><code class="language-text">#PermitRootLogin yes
</code></pre>
<p>Save the file, exit from the editor, and restart the ssh daemon:</p>
<pre><code class="language-text">root@axcf2152:~# /etc/init.d/sshd restart
</code></pre>
<h3><a class="header" href="#logging-in-without-a-password" id="logging-in-without-a-password">Logging in without a password</a></h3>
<p>For activities that require frequent login to a PLCnext Control device, e.g. during application development and testing, it can become tedious to repeatedly enter the same password. It is possible to use key-based SSH authentication to eliminate this chore, without compromising security.</p>
<p>The following article from a Phoenix Contact technical support site describes how to implement this standard Linux feature for the <code>admin</code> user on a PLCnext Control device:</p>
<p><a href="https://pxc1.esc-eu-central-1.empolisservices.com/gatekeeper/guesttoken/45?app=/service-express/portal/cb?redirect=https://pxc1.esc-eu-central-1.empolisservices.com/service-express/portal/object/esc/en-so-30b315c3-3e44-4292-97d4-6883672cd34c">How to set up key-based SSH authentication to a PLCnext Control device.</a></p>
<h2><a class="header" href="#setting-the-time" id="setting-the-time">Setting the Time</a></h2>
<p>Like with other Linux distributions, it is possible to set the date and time on a PLCnext Control device using the <code>date</code> command.</p>
<p>By default, each PLCnext Control device is configured to use Coordinated Universal Time (UTC). You should set the date and time on your device to the correct UTC time. This will - among other things - avoid problems with security certificates, which often require the time on the device to be more or less correct.</p>
<h3><a class="header" href="#network-time-protocol" id="network-time-protocol">Network Time Protocol</a></h3>
<p>If the device has access to a Network Time Protocol (NTP) server, either locally or on the internet, then it is possible to use that NTP server to maintain the correct time on the PLCnext Control device. Like with other Linux distributions, this can be achieved by editing the file <code>/etc/ntp.conf</code> on the device.</p>
<p>Information on how to set the time on a PLCnext Control device using various methods is available in the <a href="https://www.plcnext.help/te/Operating_System/System_time.htm">PLCnext Info Center</a>.</p>
<h3><a class="header" href="#setting-the-time-zone" id="setting-the-time-zone">Setting the Time Zone</a></h3>
<p>For applications that use local time rather than universal time, you may want to set the time zone on your PLCnext Control device using the procedure in the following article:</p>
<p><a href="https://pxc1.esc-eu-central-1.empolisservices.com/gatekeeper/guesttoken/45?app=/service-express/portal/cb?redirect=https://pxc1.esc-eu-central-1.empolisservices.com/service-express/portal/object/esc/en-so-deb95804-1aba-4247-8d77-da744c190b90">How to set the time zone on a PLCnext Control device.</a></p>
<p>The release notes for firmware version 2021.9 state that &quot;Setting local time zones is not fully supported&quot;. The procedure in the above article involves editing a system configuration file, which may cause problems during future firmware upgrades.</p>
<h2><a class="header" href="#firmware" id="firmware">Firmware</a></h2>
<p>The PLCnext Control firmware includes both the Linux kernel and factory-installed software from Phoenix Contact. A PLCnext Control device can be updated with a different firmware version at any time, if required. In general, newer firmware will only add non-breaking features and bug-fixes to older versions, so applications that are designed for a specific firmware version should (generally) be able to run on newer firmware versions without modification.</p>
<h3><a class="header" href="#firmware-release-schedule" id="firmware-release-schedule">Firmware Release Schedule</a></h3>
<p>PLCnext Control firmware is generally released four times a year; the first is a Long Term Support (LTS) version, and the other three are &quot;feature&quot; releases for those who want the very latest features as early as possible. The <a href="https://www.plcnext.help/te/About/Releases.htm">firmware release history and  future release schedule</a> is shown in the PLCnext Info Center.</p>
<p>There is also some information on <a href="https://www.plcnext.help/te/Features_and_roadmaps/Roadmaps.htm">upcoming firmware features</a> in the PLCnext Info Center.</p>
<h3><a class="header" href="#checking-the-firmware-version" id="checking-the-firmware-version">Checking the Firmware Version</a></h3>
<p>It is important to know the firmware version that is running on the device for a number of reasons:</p>
<ul>
<li>
<p>When building native applications, you must use a software development kit (SDK) that is compatible with the firmware version that will run the application.</p>
</li>
<li>
<p>When installing third-party applications that have been built specifically for PLCnext Control devices, you may need to select a version that is compatible with the firmware running on your device.</p>
</li>
<li>
<p>When looking for assistance in the <a href="https://www.plcnext-community.net">PLCnext Community</a>, it will often help to know what firmware version is currently running on the device.</p>
</li>
</ul>
<p>You can check the version of firmware currently running on the device by listing the contents of the <code>arpversion</code> file in the <code>/etc/plcnext/</code> directory.</p>
<pre><code class="language-text"># cat /etc/plcnext/arpversion
Arpversion: 21.6.0.46
GIT Commit Hash: 8f3c6754f20bab7c5cd88aa4de07a797c3153516
Build Job: &quot;jenkins-PLCnext-Yocto_Targets-Yocto_AXCF2152-release%2F21.6.x-46&quot;
</code></pre>
<p>The firmware version is shown in the <em>Arpversion</em> field - in this case, 21.6.0.46.</p>
<h3><a class="header" href="#upgrading-the-firmware" id="upgrading-the-firmware">Upgrading the Firmware</a></h3>
<p>New versions of PLCnext Control firmware are released regularly. If the firmware on your device is not the latest, you may want to upgrade it to get the benefit of new features and bug fixes. The firmware on a PLCnext Control device can be upgraded by following these steps:</p>
<ul>
<li>
<p>Download the firmware update file (ZIP archive) for your controller from the Phoenix Contact website.</p>
<p>For the AXC F 2152, you can browse <a href="https://phoe.co/AXC_F_2152_Firmware">directly to the firmware download page</a>. For other PLCnext Control devices, you need to navigate to the firmware download page through the relevant product page on the Phoenix Contact website.</p>
</li>
<li>
<p>Extract the <code>.raucb</code> file from the archive.</p>
<p>Now you can guess (correctly) that PLCnext Control devices use <a href="https://rauc.io/">RAUC</a> for firmware updates.</p>
</li>
<li>
<p>Copy the <code>.raucb</code> file to the device:</p>
<pre><code class="language-text">$ scp axcf2152-bundle-base-axcf2152.raucb admin@192.168.1.10:~
</code></pre>
</li>
<li>
<p>Open a shell session:</p>
<pre><code class="language-text">$ ssh admin@192.168.1.10
</code></pre>
</li>
<li>
<p>Update the firmware:</p>
<pre><code class="language-text"># sudo /etc/init.d/plcnext stop
Password:
Stopping service plcnext
plcnext stopped
#
# admin@axcf2152:~$ rauc install axcf2152-2022.0.0.13-LTS-beta.raucb
installing
0% Installing
0% Determining slot states
20% Determining slot states done.
20% Checking bundle
20% Verifying signature
40% Verifying signature done.
40% Checking bundle done.
40% Checking manifest contents
60% Checking manifest contents done.
60% Determining target install group
80% Determining target install group done.
80% Updating slots
80% Checking slot rootfs.0
90% Checking slot rootfs.0 done.
90% Copying image to rootfs.0
100% Copying image to rootfs.0 done.
100% Updating slots done.
100% Installing done.
Installing `/opt/plcnext/axcf2152-2022.0.0.13-LTS-beta.raucb` succeeded
#
# sudo reboot
</code></pre>
</li>
</ul>
<p>After the device restarts, open a new shell session and check the firmware version.</p>
<h3><a class="header" href="#but-theres-more" id="but-theres-more">But There's More!</a></h3>
<p>There are actually three firmware copies lurking on a PLCnext Control device, and all three may be different versions. The above procedure only replaces one of these three firmware installations. You will learn more about this in the next section.</p>
<h3><a class="header" href="#other-ways-to-upgrade-firmware" id="other-ways-to-upgrade-firmware">Other Ways to Upgrade Firmware</a></h3>
<p>There are currently many other ways to upgrade the firmware on the controller, including:</p>
<ul>
<li>
<p>Using the <code>update-plcnext</code> script, as described in the <a href="https://www.plcnext.help/te/Operating_System/Operating_system.htm">Firmware update</a> section of the PLCnext Info Center.</p>
</li>
<li>
<p>Through <a href="https://www.plcnext.help/te/WBM/Administration_Firmware_Update.htm">web-based management</a> (WBM).</p>
</li>
<li>
<p>Using the Device Management service on the <a href="https://proficloud.io/">Proficloud</a> web site.</p>
</li>
<li>
<p>Using an OPC UA client (not currently documented).</p>
</li>
<li>
<p>Using <a href="https://www.eclipse.org/hawkbit/">Eclipse hawkBit™</a> with the <a href="https://www.plcnextstore.com/permalinks/apps/latest/60002172000381">hawkBit™ client app</a> from the PLCnext Store.</p>
</li>
<li>
<p>Using the <code>StartFirmwareUpdate</code> method on the <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_device_interface_services.htm">Device Control</a> PLCnext runtime service.</p>
</li>
</ul>
<p>All the methods listed above require that the PLCnext runtime is running. If this is the case, then firmware upgrades should be performed using one of these methods rather than using the <code>rauc</code> command.</p>
<h1><a class="header" href="#file-system" id="file-system">File System</a></h1>
<h1><a class="header" href="#installing-software" id="installing-software">Installing Software</a></h1>
<h1><a class="header" href="#plcnext-runtime" id="plcnext-runtime">PLCnext Runtime</a></h1>
<p>PLCnext Control firmware was introduced briefly in the previous chapter. PLCnext Control firmware features can be broadly categorised as either:</p>
<ol>
<li>Features commonly available on general-purpose Linux distributions, or</li>
<li>Features developed by Phoenix Contact, that are not available on other Linux distributions.</li>
</ol>
<p>The second group of features includes:</p>
<ul>
<li>commands like <code>update-plcnext</code> and <code>recover-plcnext</code> that you saw previously, and</li>
<li>software components that are started and controlled by the <em>PLCnext runtime</em>.</li>
</ul>
<p>This chapter will look at:</p>
<ul>
<li>Controlling the PLCnext runtime</li>
<li>PLCnext components</li>
<li>Component instances</li>
<li>Disabling features of the PLCnext runtime</li>
</ul>
<blockquote>
<p>You will see the acronym <em>Arp</em> used extensively throughout this chapter. <em>Arp</em> is short for <em>Automation Runtime Platform</em>, and is another name for the PLCnext runtime.</p>
</blockquote>
<h2><a class="header" href="#controlling-the-plcnext-runtime" id="controlling-the-plcnext-runtime">Controlling the PLCnext Runtime</a></h2>
<p>When the device boots, it automatically runs the script in the file <code>/etc/init.d/plcnext</code>. This starts the <em>PLCnext runtime</em>.</p>
<p>We can stop the PLCnext runtime any time, using the same script:</p>
<pre><code class="language-text"># sudo /etc/init.d/plcnext stop
Stopping service plcnext
plcnext stopped
</code></pre>
<p>Start the PLCnext runtime, and watch entries being added to the default log file:</p>
<pre><code class="language-text"># sudo /etc/init.d/plcnext start &amp;&amp; tail -f -n 0 /opt/plcnext/logs/Output.log
Starting service plcnext
Set plcnext exports
plcnext started (bus system is axioline)
12.08.21 19:42:14.764 Arp.System.Acf.Internal.ApplicationBase     INFO  - ArpVersion: 2021.6.0 (21.6.0.46)
  :
</code></pre>
<p>You can see lots of activity in the <code>Output.log</code> file when the PLCnext Runtime starts up. The <code>Output.log</code> file is an important source of information - for example, if your PLCnext Control device ever behaves unexpectedly, the <code>Output.log</code> file will often help you to identify the problem.</p>
<p>But what does the PLCnext Runtime do? Basically, the PLCnext runtime turns an otherwise ordinary device into a PLC, and at the same time turns that device into much more than an ordinary PLC.</p>
<p>You have already used one feature of the PLCnext Runtime, when you set the IP address using <code>netnames</code>. Netnames is used to manage Profinet devices, and the PLCnext Runtime starts a component that makes the controller behave like a Profinet device. See what happens when we try to use <code>netnames</code> when the PLCnext Runtime is stopped:</p>
<pre><code class="language-text"># sudo /etc/init.d/plcnext stop
</code></pre>
<p>On the host machine:</p>
<pre><code class="language-text">$ sudo ./netnames -i eth0 -c identify
(no result)
</code></pre>
<p>We can still ping the PLC:</p>
<pre><code class="language-text">$ ping 192.168.1.10
</code></pre>
<p>... because ICMP messages are handled by the Linux operating system, not by the PLCnext runtime. This is also why we can maintain a remote shell session on the PLC, regardless of whether the PLCnext runtime is running or stopped.</p>
<p>Start the PLCnext Runtime again:</p>
<pre><code class="language-text"># sudo /etc/init.d/plcnext start
</code></pre>
<p>... and <code>netnames</code> will again be able to discover the PLC. You may need to wait for up to a minute for the PLCnext runtime to finish starting before <code>netnames</code> will see it.</p>
<h2><a class="header" href="#plcnext-runtime-components" id="plcnext-runtime-components">PLCnext Runtime Components</a></h2>
<p>Factory-installed software components that make up the PLCnext runtime include:</p>
<ul>
<li>Hardware components</li>
<li>I/O and Fieldbus components</li>
<li>System components</li>
<li>PLC components</li>
<li>Service components</li>
</ul>
<p>An overview of these component categories is given in the <a href="https://www.plcnext.help/te/PLCnext_Runtime/Core_component.htm">PLCnext Technology Info Center</a>. The categories are somewhat arbitrary, but during startup all the components in one category are generally started before any components in the next category, and vice-versa during shutdown.</p>
<p>Components are defined in C++ shared object libraries, which are located in the <code>/usr/lib</code> directory on the PLC. The tables below list these shared object libraries, the components they define, and links to more information on the function that each component implements.</p>
<h3><a class="header" href="#hardware-components" id="hardware-components">Hardware Components</a></h3>
<p>These components provide access to device hardware. They typically wrap Linux device drivers, making these devices available to other PLCnext runtime components via internal RSC services.</p>
<ul>
<li>Library filename prefix: <code>libArp.Hardware.</code></li>
<li>Component namespace: <code>Arp::Hardware</code></li>
</ul>
<table><thead><tr><th align="left">Library filename</th><th align="left">Component type name</th><th align="left">Service description</th></tr></thead><tbody>
<tr><td align="left">IdentificationData.so</td><td align="left">IdentificationData::IdentificationDataComponent</td><td align="left">Device ID data</td></tr>
<tr><td align="left">FanControl.so</td><td align="left">FanControl::FanControlComponent</td><td align="left">Fan control operations</td></tr>
<tr><td align="left">Fpga.so</td><td align="left">Fpga::FpgaComponent</td><td align="left">FPGA information</td></tr>
<tr><td align="left">OsControl.so</td><td align="left">OsControl::OsControlComponent</td><td align="left">Operating system operations</td></tr>
<tr><td align="left">RealTimeClock.so</td><td align="left">RealTimeClock::RealTimeClockComponent</td><td align="left">Real time clock operations</td></tr>
<tr><td align="left">ResourceMonitor.so</td><td align="left">ResourceMonitor::ResourceMonitorComponent</td><td align="left">CPU, memory and partition monitoring</td></tr>
<tr><td align="left">DeviceHmi.so</td><td align="left">DeviceHmi::DeviceHmiComponent</td><td align="left">Device LEDs, buttons and switches</td></tr>
<tr><td align="left">Sensors.so</td><td align="left">Sensors::SensorsComponent</td><td align="left">Device temperature, humidity and power monitoring</td></tr>
<tr><td align="left">Nim.so</td><td align="left">Nim::NimComponent<br/>Nim::NetloadLimiterComponent</td><td align="left">Ethernet information, IP configuration and IP status<br/><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Hardware_1_1Nim_1_1Services_1_1INetloadLimiterService.html" title="API description">Network load limiter</a> (public)]</td></tr>
<tr><td align="left">ExternalSDCard.so</td><td align="left">ExternalSDCard::ExternalSDCardComponent</td><td align="left">Information on the external SD card license, status and settings</td></tr>
<tr><td align="left">ExternalPci.so</td><td align="left">ExternalPci::ExternalPciComponent</td><td align="left">External PCI state information</td></tr>
</tbody></table>
<h3><a class="header" href="#device-components" id="device-components">Device Components</a></h3>
<p>These components provide device-specific abstractions for some low-level hardware services.</p>
<ul>
<li>Library filename prefix: <code>libArp.Device.</code></li>
<li>Component namespace: <code>Arp::Device</code></li>
</ul>
<table><thead><tr><th align="left">Library filename</th><th align="left">Component type name</th><th align="left">Service description</th></tr></thead><tbody>
<tr><td align="left">HmiLed.so</td><td align="left">HmiLed::HmiLedComponent</td><td align="left">LED management (internal)</td></tr>
<tr><td align="left">Interface.so</td><td align="left">Interface::DiComponent</td><td align="left"><a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_device_interface_services.htm#IDeviceControlService" title="PLCnext Info Center">Device control</a> (public)<br/><a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_device_interface_services.htm#IDeviceInfoService" title="PLCnext Info Center">Device information</a> (public)<br/><a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_device_interface_services.htm#IDeviceSettingsService" title="PLCnext Info Center">Device settings</a> (public)<br/><a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_device_interface_services.htm#IDeviceStatusService" title="PLCnext Info Center">Device status</a> (public)</td></tr>
</tbody></table>
<h3><a class="header" href="#io-components" id="io-components">I/O Components</a></h3>
<p>These components provide access to physical I/O modules through a variety of standard industrial networks.</p>
<ul>
<li>Library filename prefix: <code>libArp.Io.</code></li>
<li>Component namespace: <code>Arp::Io</code></li>
</ul>
<table><thead><tr><th align="left">Library filename</th><th align="left">Component type name</th><th align="left">Function</th><th align="left">Condition</th></tr></thead><tbody>
<tr><td align="left">Axioline.so</td><td align="left">Axioline::AxiolineComponent</td><td align="left">Axioline master<sup>1</sup></td><td align="left">ARP_COMPONENT_AXIOLINE</td></tr>
<tr><td align="left">Interbus.so</td><td align="left">Interbus::InterbusComponent</td><td align="left">Interbus master<sup>1</sup></td><td align="left">ARP_COMPONENT_INTERBUS</td></tr>
<tr><td align="left">EthernetIP.so</td><td align="left">EthernetIP::EthernetIPComponent</td><td align="left">Ethernet/IP device<sup>1</sup></td><td align="left">ARP_COMPONENT_ETHERNETIP</td></tr>
<tr><td align="left">ProfinetStack.so</td><td align="left">ProfinetStack::System::SystemComponent<br/>ProfinetStack::Controller::ControllerComponent<br/>ProfinetStack::Device::DeviceComponent</td><td align="left">Profinet system<br/>Profinet controller<br/>Profinet device</td><td align="left">ARP_COMPONENT_PROFINET or ARP_COMPONENT_PNC or ARP_COMPONENT_PND</td></tr>
</tbody></table>
<p><sup>1</sup> Only available on AXC devices.</p>
<h3><a class="header" href="#system-components" id="system-components">System Components</a></h3>
<p>These components implement low-level PLCnext runtime features. They may provide an API, but are not generally designed to be configurable by end users.</p>
<ul>
<li>Library filename prefix: <code>libArp.System.</code></li>
<li>Component namespace: <code>Arp::System</code></li>
</ul>
<table><thead><tr><th align="left">Library filename</th><th align="left">Component type name</th><th align="left">Function</th></tr></thead><tbody>
<tr><td align="left">Commons.Services.so</td><td align="left">Commons::Services::Component</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Commons_1_1Services_1_1Io_1_1IFileSystemInfoService.html" title="API description">File system info</a> (public)<br/><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Commons_1_1Services_1_1Io_1_1IDirectoryService.html" title="API description">Directory service</a> (public)<br/><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Commons_1_1Services_1_1Io_1_1IFileService.html" title="API description">File service</a> (public)<br/><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Commons_1_1Services_1_1Security_1_1IDeviceIdentityValidatorService.html" title="API description">Device ID validator</a> (public)<br/>Trust store management (internal)<br/>Identity store management (internal)</td></tr>
<tr><td align="left">Security.Services.so</td><td align="left">Security::Services::Component</td><td align="left">System security</td></tr>
<tr><td align="left">Watchdog.so</td><td align="left">Watchdog::SystemWatchdogComponent</td><td align="left">System watchdog configuration and monitoring</td></tr>
<tr><td align="left">RscGateway.so</td><td align="left">RscGateway::RscGatewayComponent</td><td align="left"><a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_Remote_Service_Calls.htm" title="PLCnext Info Center">Remote service call gateway</a></td></tr>
<tr><td align="left">Um.so</td><td align="left">Um::UmComponent</td><td align="left"><a href="https://www.plcnext.help/te/WBM/Security_User_authentication.htm" title="PLCnext Info Center">User manager</a></td></tr>
</tbody></table>
<h3><a class="header" href="#plc-components" id="plc-components">PLC Components</a></h3>
<p>These components implement features you would expect to find on PLCs.</p>
<p>Library filename prefix: <code>libArp.Plc.</code>
Component namespace: <code>Arp::Plc</code></p>
<table><thead><tr><th align="left">Library filename</th><th align="left">Component type name</th><th align="left">Function</th></tr></thead><tbody>
<tr><td align="left">Domain.so</td><td align="left">Domain::PlcDomainProxyComponent<br/>Domain::PlcManagerComponent<br/>Domain::PlcDomainComponent</td><td align="left">Related to I/O<br/>?<br/>?</td></tr>
<tr><td align="left">Meta.so</td><td align="left">Meta::MetaDomainComponent<br/>Meta::MetaComponent<br/>Meta::MetaControllerComponent</td><td align="left">GDS traverser (public)<br/>GDS browser (internal)</td></tr>
<tr><td align="left">Eclr.so</td><td align="left">Eclr::EclrComponent<br/>Eclr::EclrServicesComponent<br/>Eclr::ArpDomainComponent</td><td align="left"><a href="https://www.plcnext.help/te/Programming/Csharp/eCLR_Programming_System.htm" title="PLCnext Info Center">Embedded Common Language Runtime</a></td></tr>
<tr><td align="left">Plm.so</td><td align="left">Plm::PlmComponent</td><td align="left"><a href="https://www.plcnext.help/te/Programming/Cpp/Cpp_program_structure/PLM_Program_Library_Manager.htm" title="PLCnext Info Center">Manages real-time C++ programs</a></td></tr>
<tr><td align="left">Esm.so</td><td align="left">Esm::EsmComponent<br/>Esm::EsmControllerComponent</td><td align="left"><a href="https://www.plcnext.help/te/PLCnext_Runtime/ESM.htm" title="PLCnext Info Center">Execution and Synchronisation Manager</a></td></tr>
<tr><td align="left">Gds.so</td><td align="left">Gds::GdsComponent</td><td align="left"><a href="https://www.plcnext.help/te/PLCnext_Runtime/GDS_Global_Data_Space.htm" title="PLCnext Info Center">Manages the global data space</a></td></tr>
<tr><td align="left">Retain.so</td><td align="left">Retain::RetainComponent</td><td align="left">Manages retentive variables</td></tr>
<tr><td align="left">Fbm.so</td><td align="left">Fbm::FbmComponent<br/>Fbm::FbIoComponent</td><td align="left">Fieldbus manager</td></tr>
</tbody></table>
<h3><a class="header" href="#service-components" id="service-components">Service Components</a></h3>
<p>These components generally provide high-level, non real time features that are easily configurable by end users.</p>
<p>Library filename prefix: <code>libArp.Services.</code>
Component namespace: <code>Arp::Services</code></p>
<table><thead><tr><th align="left">Library filename</th><th align="left">Component type name</th><th align="left">Function</th></tr></thead><tbody>
<tr><td align="left">Alarms.so</td><td align="left">Alarms::AlarmsComponent</td><td align="left"><a href="https://www.plcnext.help/te/Service_Components/Alarms/Alarms.htm" title="PLCnext Info Center">Alarm dispatcher</a></td></tr>
<tr><td align="left">Fwm.so</td><td align="left">Fwm::FwmComponent</td><td align="left"><a href="https://www.plcnext.help/te/WBM/Security_Firewall.htm" title="PLCnext Info Center">Firewall manager</a></td></tr>
<tr><td align="left">Wbm.so</td><td align="left">Wbm::WbmComponent</td><td align="left"><a href="https://www.plcnext.help/te/WBM/WBM.htm" title="PLCnext Info Center">Web-based management</a></td></tr>
<tr><td align="left">Ehmi.so</td><td align="left">Ehmi::EhmiComponent</td><td align="left"><a href="https://www.plcnext.help/te/Programming/IEC_61131-3/Creating_a_PLCnext_Engineer_HMI_application.htm" title="PLCnext Info Center">Embedded HMI</a></td></tr>
<tr><td align="left">OpcUAServer.so</td><td align="left">OpcUAServer::OpcUAServerComponent</td><td align="left"><a href="https://www.plcnext.help/te/Service_Components/OPC_UA_Server/OPC_UA_server_eUA.htm" title="PLCnext Info Center">OPC UA server</a></td></tr>
<tr><td align="left">ProfiCloud.so</td><td align="left">ProfiCloud::ProfiCloudComponent</td><td align="left"><a href="https://www.plcnext.help/te/Service_Components/PROFICLOUD/Transferring_values_to_PROFICLOUD.htm" title="PLCnext Info Center">Proficloud TSD publisher</a> (deprecated)</td></tr>
<tr><td align="left">NotificationLogger.so</td><td align="left">NotificationLogger::NotificationLoggerComponent</td><td align="left"><a href="https://www.plcnext.help/te/Service_Components/Notifications/Notification_Logger.htm" title="PLCnext Info Center">Notification logger</a></td></tr>
<tr><td align="left">TraceController.so</td><td align="left">TraceController::TraceControllerComponent</td><td align="left"><a href="https://lttng.org/" title="LTTng">LTTng trace controller</a></td></tr>
<tr><td align="left">NmUtilities.so</td><td align="left">NmUtilities::NmPlcStateListener::NmPlcStateListenerComponent</td><td align="left"><a href="https://www.plcnext.help/te/Service_Components/Notifications/Notification_manager.htm" title="PLCnext Info Center">Notification manager</a></td></tr>
<tr><td align="left">DataLogger.so</td><td align="left">DataLogger::DataLoggerComponent</td><td align="left"><a href="https://www.plcnext.help/te/Service_Components/DataLogger/DataLogger.htm" title="PLCnext Info Center">Data logger</a></td></tr>
<tr><td align="left">AppManager.so</td><td align="left">AppManager::AppManagerComponent</td><td align="left"><a href="https://www.plcnext.help/te/WBM/Administration_PLCnext_Apps.htm" title="PLCnext Info Center">PLCnext Store app management</a></td></tr>
<tr><td align="left">Fwu.so</td><td align="left">Fwu::FwuComponent</td><td align="left">Firmware update</td></tr>
<tr><td align="left">LinuxSyslog.so</td><td align="left">LinuxSyslog::LinuxSyslogComponent</td><td align="left">syslog-ng interface</td></tr>
<tr><td align="left">ProfiCloudV3.so</td><td align="left">ProfiCloudV3::ProfiCloudV3Component</td><td align="left"><a href="https://www.plcnext.help/te/Service_Components/PROFICLOUD/Proficloud_V3_Introduction.htm" title="PLCnext Info Center">Proficloud</a></td></tr>
<tr><td align="left">Wcm.so</td><td align="left">Wcm::WcmComponent</td><td align="left">Web configuration management</td></tr>
<tr><td align="left">Logging.so</td><td align="left">Logging::LoggingComponent<br/>Logging::LogManagerComponent<br/>Logging::LogProviderComponent</td><td align="left">General event logger</td></tr>
<tr><td align="left">SpnsProxy.so</td><td align="left">SpnsProxy::SpnsProxyComponent</td><td align="left">Safety controller (SPNS) communications</td></tr>
</tbody></table>
<h2><a class="header" href="#component-instances" id="component-instances">Component Instances</a></h2>
<p>When the PLCnext runtime starts, the following happens:</p>
<ol>
<li>One or more processes are started.</li>
<li>The libraries containing PLCnext component definitions are loaded into the specified process(es).</li>
<li>Component instances are created in the specified processes.</li>
</ol>
<p>The configuration information in this section appears in the following files:</p>
<ul>
<li><code>/etc/plcnext/device/Libraries.acf.config</code></li>
<li><code>/etc/plcnext/device/MainProcess.acf.config</code></li>
<li><code>/etc/plcnext/device/ExternalIoProcess.acf.config</code></li>
<li><code>/etc/plcnext/device/AXCF2152.acf.config</code></li>
</ul>
<h3><a class="header" href="#runtime-processes" id="runtime-processes">Runtime Processes</a></h3>
<p>Most component instance are created in the main PLCnext runtime process, which is called <strong>MainProcess</strong>. In the AXC F 2152, one additional process is created, in which I/O component instances related to Axioline, Ethernet/IP and Interbus are created.</p>
<table><thead><tr><th align="left">Process name</th><th align="left">Local TCP port</th></tr></thead><tbody>
<tr><td align="left">MainProcess</td><td align="left">41121</td></tr>
<tr><td align="left">ExternalIoProcess</td><td align="left">41123</td></tr>
<tr><td align="left">LocalIoProcess<sup>1</sup></td><td align="left">41124</td></tr>
</tbody></table>
<p><sup>1</sup> Only on AXC devices.</p>
<p>Since multiple Interbus and Profinet hardware interfaces are possible on an AXC F 2152 device, these additional processes allow the corresponding I/O networks to be dynamically assigned to the the correct hardware interface.</p>
<h3><a class="header" href="#component-libraries" id="component-libraries">Component Libraries</a></h3>
<p>The following table show the alias given to each component library by the PLCnext runtime.</p>
<p>Libraries can be loaded conditionally, based on the value of a boolean environment variable. If no condition is specified, the library is always loaded.</p>
<table><thead><tr><th align="left">Filename<br/>(libArp.*.so)</th><th align="left">Alias<br/>(Arp.*.Library)</th><th align="left">Condition</th></tr></thead><tbody>
<tr><td align="left"><strong>System.</strong></td><td align="left"><strong>System.</strong></td><td align="left"></td></tr>
<tr><td align="left">Um</td><td align="left">Um</td><td align="left"></td></tr>
<tr><td align="left">RscGateway</td><td align="left">RscGateway</td><td align="left"></td></tr>
<tr><td align="left">Commons.Services</td><td align="left">Commons.Services</td><td align="left"></td></tr>
<tr><td align="left">Security.Services</td><td align="left">Security.Services</td><td align="left"></td></tr>
<tr><td align="left">Fwu</td><td align="left">Fwu</td><td align="left"></td></tr>
<tr><td align="left">Watchdog</td><td align="left">SystemWatchdog</td><td align="left">ARP_COMPONENT_SYSTEM_WATCHDOG</td></tr>
<tr><td align="left">SysWatchdog</td><td align="left">SysWatchdog</td><td align="left"></td></tr>
<tr><td align="left"><strong>Hardware.</strong></td><td align="left"><strong>Hardware.</strong></td><td align="left"></td></tr>
<tr><td align="left">Nim</td><td align="left">Nim</td><td align="left"></td></tr>
<tr><td align="left">IdentificationData</td><td align="left">IdentificationData</td><td align="left"></td></tr>
<tr><td align="left">FanControl</td><td align="left">FanControl</td><td align="left"></td></tr>
<tr><td align="left">Fpga</td><td align="left">Fpga</td><td align="left"></td></tr>
<tr><td align="left">OsControl</td><td align="left">OsControl</td><td align="left"></td></tr>
<tr><td align="left">RealTimeClock</td><td align="left">RealTimeClock</td><td align="left"></td></tr>
<tr><td align="left">ResourceMonitor</td><td align="left">ResourceMonitor</td><td align="left"></td></tr>
<tr><td align="left">DeviceHmi</td><td align="left">DeviceHmi</td><td align="left"></td></tr>
<tr><td align="left">Sensors</td><td align="left">Sensors</td><td align="left"></td></tr>
<tr><td align="left">ExternalSDCard</td><td align="left">ExternalSDCard</td><td align="left"></td></tr>
<tr><td align="left">ExternalPci</td><td align="left">ExternalPci</td><td align="left">ARP_COMPONENT_EXTERNAL_PCI</td></tr>
<tr><td align="left"><strong>Device.</strong></td><td align="left"><strong>Device.</strong></td><td align="left"></td></tr>
<tr><td align="left">HmiLed</td><td align="left">HmiLed</td><td align="left"></td></tr>
<tr><td align="left">Interface</td><td align="left">Interface</td><td align="left"></td></tr>
<tr><td align="left"><strong>Plc.</strong></td><td align="left"><strong>Plc.</strong></td><td align="left"></td></tr>
<tr><td align="left">Eclr</td><td align="left">Eclr</td><td align="left"></td></tr>
<tr><td align="left">Plm</td><td align="left">Plm</td><td align="left"></td></tr>
<tr><td align="left">Esm</td><td align="left">Esm</td><td align="left"></td></tr>
<tr><td align="left">Gds</td><td align="left">Gds</td><td align="left"></td></tr>
<tr><td align="left">Domain</td><td align="left">Domain</td><td align="left"></td></tr>
<tr><td align="left">Meta</td><td align="left">Meta</td><td align="left"></td></tr>
<tr><td align="left">Fbm</td><td align="left">Fbm</td><td align="left"></td></tr>
<tr><td align="left">Retain</td><td align="left">Retain</td><td align="left">ARP_COMPONENT_RETAIN</td></tr>
<tr><td align="left"><strong>Services.</strong></td><td align="left"><strong>Services.</strong></td><td align="left"></td></tr>
<tr><td align="left">Fwm</td><td align="left">Fwm</td><td align="left"></td></tr>
<tr><td align="left">Wbm</td><td align="left">Wbm</td><td align="left"></td></tr>
<tr><td align="left">Ehmi</td><td align="left">Ehmi</td><td align="left"></td></tr>
<tr><td align="left">OpcUAServer</td><td align="left">OpcUAServer</td><td align="left"></td></tr>
<tr><td align="left">Alarms</td><td align="left">Alarms</td><td align="left"></td></tr>
<tr><td align="left">ProfiCloud</td><td align="left">ProfiCloud</td><td align="left">ARP_COMPONENT_PROFICLOUD</td></tr>
<tr><td align="left">ProfiCloudV3</td><td align="left">ProfiCloudV3</td><td align="left">ARP_COMPONENT_PROFICLOUD_V3</td></tr>
<tr><td align="left">NotificationLogger</td><td align="left">NotificationLogger</td><td align="left"></td></tr>
<tr><td align="left">TraceController</td><td align="left">TraceController</td><td align="left"></td></tr>
<tr><td align="left">NmUtilities</td><td align="left">NmUtilities</td><td align="left"></td></tr>
<tr><td align="left">DataLogger</td><td align="left">DataLogger</td><td align="left"></td></tr>
<tr><td align="left">AppManager</td><td align="left">AppManager</td><td align="left">ARP_COMPONENT_APPMANAGER</td></tr>
<tr><td align="left">LinuxSyslog</td><td align="left">LinuxSyslog</td><td align="left">ARP_COMPONENT_LINUXSYSLOG</td></tr>
<tr><td align="left">Wcm</td><td align="left">Wcm</td><td align="left"></td></tr>
<tr><td align="left">Logging</td><td align="left">Logging</td><td align="left"></td></tr>
<tr><td align="left">SpnsProxy</td><td align="left">SpnsProxy</td><td align="left"></td></tr>
<tr><td align="left"><strong>Io.</strong></td><td align="left"><strong>Io.</strong></td><td align="left"></td></tr>
<tr><td align="left">ProfinetStack</td><td align="left">Pn</td><td align="left">ARP_COMPONENT_PROFINET<br/>or ARP_COMPONENT_PNC<br/>or ARP_COMPONENT_PND</td></tr>
<tr><td align="left">Axioline.so<sup>1</sup></td><td align="left">Axl</td><td align="left">ARP_COMPONENT_AXIOLINE</td></tr>
<tr><td align="left">Interbus.so<sup>1</sup></td><td align="left">IbM</td><td align="left">ARP_COMPONENT_INTERBUS</td></tr>
<tr><td align="left">EthernetIP.so<sup>1</sup></td><td align="left">EthernetIP</td><td align="left">ARP_COMPONENT_ETHERNETIP</td></tr>
</tbody></table>
<p><sup>1</sup> Only available on AXC devices.</p>
<h3><a class="header" href="#component-instances-1" id="component-instances-1">Component Instances</a></h3>
<p>Each component created by the PLCnext runtime:</p>
<ul>
<li>Is created in a specific process. If no process is specified, the component is created in the main PLCnext Runtime process (&quot;MainProcess&quot;).</li>
<li>Can optionally be passed settings information. In the table below, all settings information represent files relative to the directory <code>/etc/plcnext/device</code>.</li>
<li>Can be created conditionally, based on the value of a boolean environment variable. If no condition is specified, the component instance is always created.</li>
</ul>
<table><thead><tr><th align="left">Instance name<br/>(Arp.*)</th><th align="left">Type<br/>(Arp::*)</th><th align="left">Process</th><th align="left">Settings information<br/>(<code>/etc/plcnext/device/*</code></th><th align="left">Condition</th></tr></thead><tbody>
<tr><td align="left"><strong>System.</strong></td><td align="left"><strong>System::</strong></td><td align="left"></td><td align="left"><strong>System/</strong></td><td align="left"></td></tr>
<tr><td align="left">Commons.Services</td><td align="left">Commons::Services::Component</td><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">Security.Services</td><td align="left">Security::Services::Component</td><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">Watchdog.MainProcess</td><td align="left">Watchdog::SystemWatchdogComponent</td><td align="left"></td><td align="left">Watchdog/Watchdog.settings</td><td align="left">ARP_COMPONENT_SYSTEM_WATCHDOG</td></tr>
<tr><td align="left">RscGateway</td><td align="left">RscGateway::RscGatewayComponent</td><td align="left"></td><td align="left">RscGateway/RscGateway.settings</td><td align="left"></td></tr>
<tr><td align="left">Um</td><td align="left">Um::UmComponent</td><td align="left"></td><td align="left">Um/Um.settings</td><td align="left"></td></tr>
<tr><td align="left">Fwu</td><td align="left">Fwu::FwuComponent</td><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">Wcm</td><td align="left">Wcm::WcmComponent</td><td align="left"></td><td align="left">Wcm/Wcm.settings</td><td align="left">ARP_COMPONENT_WCM</td></tr>
<tr><td align="left"><strong>Hardware.</strong></td><td align="left"><strong>Hardware::</strong></td><td align="left"></td><td align="left"><strong>Hardware/</strong></td><td align="left"></td></tr>
<tr><td align="left">IdentificationData</td><td align="left">IdentificationData::IdentificationDataComponent</td><td align="left"></td><td align="left">IdentificationData/IdentificationData.settings</td><td align="left"></td></tr>
<tr><td align="left">FanControl</td><td align="left">FanControl::FanControlComponent</td><td align="left"></td><td align="left">FanControl/FanControl.settings</td><td align="left"></td></tr>
<tr><td align="left">Fpga</td><td align="left">Fpga::FpgaComponent</td><td align="left"></td><td align="left">Fpga/Fpga.settings</td><td align="left"></td></tr>
<tr><td align="left">OsControl</td><td align="left">OsControl::OsControlComponent</td><td align="left"></td><td align="left">OsControl/OsControl.settings</td><td align="left"></td></tr>
<tr><td align="left">RealTimeClock</td><td align="left">RealTimeClock::RealTimeClockComponent</td><td align="left"></td><td align="left">RealTimeClock/RealTimeClock.settings</td><td align="left"></td></tr>
<tr><td align="left">ResourceMonitor</td><td align="left">ResourceMonitor::ResourceMonitorComponent</td><td align="left"></td><td align="left">ResourceMonitor/ResourceMonitor.settings</td><td align="left"></td></tr>
<tr><td align="left">DeviceHmi</td><td align="left">DeviceHmi::DeviceHmiComponent</td><td align="left"></td><td align="left">DeviceHmi/DeviceHmi.settings</td><td align="left"></td></tr>
<tr><td align="left">Sensors</td><td align="left">Sensors::SensorsComponent</td><td align="left"></td><td align="left">Sensors/Sensors.settings</td><td align="left"></td></tr>
<tr><td align="left">Nim</td><td align="left">Nim::NimComponent</td><td align="left"></td><td align="left">Nim/Nim.settings</td><td align="left"></td></tr>
<tr><td align="left">NetloadLimiter</td><td align="left">Nim::NetloadLimiterComponent</td><td align="left"></td><td align="left">Nim/NetloadLimiter.settings</td><td align="left">ARP_COMPONENT_NETLOAD_LIMITER</td></tr>
<tr><td align="left">ExternalSDCard</td><td align="left">ExternalSDCard::ExternalSDCardComponent</td><td align="left"></td><td align="left">ExternalSDCard/ExternalSDCard.settings</td><td align="left"></td></tr>
<tr><td align="left">ExternalPci</td><td align="left">ExternalPci::ExternalPciComponent</td><td align="left"></td><td align="left">ExternalPci/ExternalPci.settings</td><td align="left">ARP_COMPONENT_EXTERNAL_PCI</td></tr>
<tr><td align="left"><strong>Device.</strong></td><td align="left"><strong>Device::</strong></td><td align="left"></td><td align="left"><strong>Device/</strong></td><td align="left"></td></tr>
<tr><td align="left">HmiLed</td><td align="left">HmiLed::HmiLedComponent</td><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">Interface</td><td align="left">Interface::DiComponent</td><td align="left"></td><td align="left">Interface/Di.settings</td><td align="left"></td></tr>
<tr><td align="left"><strong>Plc.</strong></td><td align="left"><strong>Plc::</strong></td><td align="left"></td><td align="left"><strong>Plc/</strong></td><td align="left"></td></tr>
<tr><td align="left">Manager</td><td align="left">Domain::PlcManagerComponent</td><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">Domain</td><td align="left">Domain::PlcDomainComponent</td><td align="left"></td><td align="left">Domain/PlcDomain.settings</td><td align="left"></td></tr>
<tr><td align="left">MetaDomain</td><td align="left">Meta::MetaDomainComponent</td><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">Meta</td><td align="left">Meta::MetaComponent</td><td align="left"></td><td align="left">Meta/Meta.settings</td><td align="left"></td></tr>
<tr><td align="left">MetaController</td><td align="left">Meta::MetaControllerComponent</td><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">Eclr</td><td align="left">Eclr::EclrComponent</td><td align="left"></td><td align="left">Eclr/Eclr.settings</td><td align="left">ARP_COMPONENT_ECLR</td></tr>
<tr><td align="left">EclrServices</td><td align="left">Eclr::EclrServicesComponent</td><td align="left"></td><td align="left"></td><td align="left">ARP_COMPONENT_ECLR</td></tr>
<tr><td align="left">Eclr.ArpDomain</td><td align="left">Eclr::ArpDomainComponent</td><td align="left"></td><td align="left"></td><td align="left">ARP_COMPONENT_ECLR</td></tr>
<tr><td align="left">Plm</td><td align="left">Plm::PlmComponent</td><td align="left"></td><td align="left">Plm/Plm.settings</td><td align="left"></td></tr>
<tr><td align="left">Esm</td><td align="left">Esm::EsmComponent</td><td align="left"></td><td align="left">Esm/Esm.settings</td><td align="left"></td></tr>
<tr><td align="left">EsmController</td><td align="left">Esm::EsmControllerComponent</td><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">Gds</td><td align="left">Gds::GdsComponent</td><td align="left"></td><td align="left">Gds/Gds.settings</td><td align="left"></td></tr>
<tr><td align="left">Retain</td><td align="left">Retain::RetainComponent</td><td align="left"></td><td align="left">Retain/Retain.settings</td><td align="left">ARP_COMPONENT_RETAIN</td></tr>
<tr><td align="left">Fbm</td><td align="left">Fbm::FbmComponent</td><td align="left"></td><td align="left">Fbm/Fbm.settings</td><td align="left"></td></tr>
<tr><td align="left">DomainProxy.ExternalIoProcess</td><td align="left">Domain::PlcDomainProxyComponent</td><td align="left">ExternalIoProcess</td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">DomainProxy.LocalIoProcess<sup>1</sup></td><td align="left">Domain::PlcDomainProxyComponent</td><td align="left">LocalIoProcess</td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left"><strong>Io.</strong></td><td align="left"><strong>Plc::</strong></td><td align="left"></td><td align="left"><strong>Plc/</strong></td><td align="left"></td></tr>
<tr><td align="left">FbIo.PnC</td><td align="left">Fbm::FbIoComponent</td><td align="left"></td><td align="left">FbIo.PnC/FbIo.settings</td><td align="left">ARP_COMPONENT_PROFINET<br/>or ARP_COMPONENT_PNC</td></tr>
<tr><td align="left">FbIo.PnD</td><td align="left">Fbm::FbIoComponent</td><td align="left"></td><td align="left">FbIo.PnD/FbIo.settings</td><td align="left">ARP_COMPONENT_PROFINET<br/>or ARP_COMPONENT_PND</td></tr>
<tr><td align="left">FbIo.AxlC<sup>1</sup></td><td align="left">Fbm::FbIoComponent</td><td align="left"></td><td align="left">FbIo.AxlC/FbIo.settings</td><td align="left"></td></tr>
<tr><td align="left">FbIo.IbM<sup>1</sup></td><td align="left">Fbm::FbIoComponent</td><td align="left"></td><td align="left">FbIo.IbM/FbIo.settings</td><td align="left"></td></tr>
<tr><td align="left">FbIo.EthernetIP<sup>1</sup></td><td align="left">Fbm::FbIoComponent</td><td align="left"></td><td align="left">FbIo.EthernetIP/FbIo.settings</td><td align="left">ARP_COMPONENT_ETHERNETIP</td></tr>
<tr><td align="left"><strong>Io.</strong></td><td align="left"><strong>Io::</strong></td><td align="left"></td><td align="left"><strong>Io/</strong></td><td align="left"></td></tr>
<tr><td align="left">PnS</td><td align="left">ProfinetStack::System::SystemComponent</td><td align="left">ExternalIoProcess</td><td align="left">PnS/PnS.settings</td><td align="left">ARP_COMPONENT_PROFINET<br/>or ARP_COMPONENT_PNC<br/>or ARP_COMPONENT_PND</td></tr>
<tr><td align="left">PnC</td><td align="left">ProfinetStack::Controller::ControllerComponent</td><td align="left">ExternalIoProcess</td><td align="left">PnC/PnC.settings</td><td align="left">ARP_COMPONENT_PNC</td></tr>
<tr><td align="left">PnD</td><td align="left">ProfinetStack::Device::DeviceComponent</td><td align="left">ExternalIoProcess</td><td align="left">PnD/PnD.settings</td><td align="left">ARP_COMPONENT_PND</td></tr>
<tr><td align="left">AxlC<sup>1</sup></td><td align="left">Axioline::AxiolineComponent</td><td align="left"></td><td align="left">AxlC/AxlC.settings</td><td align="left">ARP_COMPONENT_AXIOLINE</td></tr>
<tr><td align="left">IbM<sup>1</sup></td><td align="left">Interbus::InterbusComponent</td><td align="left">LocalIoProcess</td><td align="left">IbM/IbM.settings</td><td align="left">ARP_COMPONENT_INTERBUS</td></tr>
<tr><td align="left">EthernetIP<sup>1</sup></td><td align="left">EthernetIP::EthernetIPComponent</td><td align="left">ExternalIoProcess</td><td align="left">EthernetIP/EthernetIP.settings</td><td align="left">ARP_COMPONENT_ETHERNETIP</td></tr>
<tr><td align="left"><strong>Services.</strong></td><td align="left"><strong>Services::</strong></td><td align="left"></td><td align="left"><strong>Services/</strong></td><td align="left"></td></tr>
<tr><td align="left">Alarms</td><td align="left">Alarms::AlarmsComponent</td><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">Fwm</td><td align="left">Fwm::FwmComponent</td><td align="left"></td><td align="left">Fwm/Fwm.settings</td><td align="left">ARP_COMPONENT_FWM</td></tr>
<tr><td align="left">Wbm</td><td align="left">Wbm::WbmComponent</td><td align="left"></td><td align="left">Wbm/Wbm.settings</td><td align="left">ARP_COMPONENT_WBM</td></tr>
<tr><td align="left">Ehmi</td><td align="left">Ehmi::EhmiComponent</td><td align="left"></td><td align="left">Ehmi/ehmi.settings</td><td align="left">ARP_COMPONENT_EHMI</td></tr>
<tr><td align="left">OpcUAServer</td><td align="left">OpcUAServer::OpcUAServerComponent</td><td align="left"></td><td align="left">OpcUA/opcua.settings</td><td align="left">ARP_COMPONENT_OPC_UA</td></tr>
<tr><td align="left">ProfiCloud</td><td align="left">ProfiCloud::ProfiCloudComponent</td><td align="left"></td><td align="left">ProfiCloud/Proficloud.settings</td><td align="left">ARP_COMPONENT_PROFICLOUD</td></tr>
<tr><td align="left">ProfiCloudV3</td><td align="left">ProfiCloudV3::ProfiCloudV3Component</td><td align="left"></td><td align="left">ProfiCloudV3/ProfiCloudV3.settings</td><td align="left">ARP_COMPONENT_PROFICLOUD_V3</td></tr>
<tr><td align="left">NotificationLogger</td><td align="left">NotificationLogger::NotificationLoggerComponent</td><td align="left"></td><td align="left">NotificationLogger/NotificationLogger.settings</td><td align="left"></td></tr>
<tr><td align="left">TraceController</td><td align="left">TraceController::TraceControllerComponent</td><td align="left"></td><td align="left">TraceController/TraceController.settings</td><td align="left">ARP_COMPONENT_TRACECONTROLLER</td></tr>
<tr><td align="left">NmUtilities.NmPlcStateListener</td><td align="left">NmUtilities::NmPlcStateListener::NmPlcStateListenerComponent</td><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td align="left">DataLogger</td><td align="left">DataLogger::DataLoggerComponent</td><td align="left"></td><td align="left">DataLogger/dataLogger.settings</td><td align="left">ARP_COMPONENT_DATALOGGER</td></tr>
<tr><td align="left">AppManager</td><td align="left">AppManager::AppManagerComponent</td><td align="left"></td><td align="left">AppManager/AppManager.settings</td><td align="left">ARP_COMPONENT_APPMANAGER</td></tr>
<tr><td align="left">LinuxSyslog</td><td align="left">LinuxSyslog::LinuxSyslogComponent</td><td align="left"></td><td align="left">LinuxSyslog/LinuxSyslog.settings</td><td align="left">ARP_COMPONENT_LINUXSYSLOG</td></tr>
<tr><td align="left">Logging</td><td align="left">Logging::LoggingComponent</td><td align="left"></td><td align="left"></td><td align="left">ARP_COMPONENT_LOGGING</td></tr>
<tr><td align="left">LogManager</td><td align="left">Logging::LogManagerComponent</td><td align="left"></td><td align="left"></td><td align="left">ARP_COMPONENT_LOGMANAGER</td></tr>
<tr><td align="left">LogProvider</td><td align="left">Logging::LogProviderComponent</td><td align="left"></td><td align="left"></td><td align="left">ARP_COMPONENT_LOGMANAGER</td></tr>
<tr><td align="left">SpnsProxy</td><td align="left">SpnsProxy::SpnsProxyComponent</td><td align="left"></td><td align="left">SpnsProxy/spnsproxy.settings</td><td align="left">ARP_COMPONENT_SPNSPROXY</td></tr>
</tbody></table>
<p><sup>1</sup> Only on AXC devices.</p>
<h2><a class="header" href="#disabling-features" id="disabling-features">Disabling Features</a></h2>
<p>By default, the PLCnext runtime starts a large number of components. These components implement services or features on the device. In some circumstances it may be desirable to disable some of these features - for example, you want to free the resources that unused services would otherwise consume.</p>
<p>It is possible to disable some system features through the Web-Based Management (WBM) page of the device. This is described in the PLCnext Info Center:</p>
<p>https://www.plcnext.help/te/WBM/Configuration_System_Services.htm</p>
<p>In the next chapter, you will see how to add your own custom component to this list.</p>
<h2><a class="header" href="#rsc-services" id="rsc-services">RSC Services</a></h2>
<p>For PLCnext runtime features that are user configurable, configuration can usually be performed through either the web-based management interface, or modifying text files on the PLC.</p>
<p>Some PLCnext runtime features also provide an application programming interface (API) in the form of <em>Remote Service Calls</em>, or <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_Remote_Service_Calls.htm">RSC Services</a>.</p>
<p>A list of the RSC services that are available in the PLCnext runtime is given in <a href="appendix-02-list-of-rsc-services.html">Appendix B</a>.</p>
<p>RSC services can be accessed at least in two ways:</p>
<ul>
<li>Using an SDK to link to the relevant C++ shared object libraries. This provides local access to RSC services running on the same device as the C++ client.</li>
<li>Via <a href="https://grpc.io/">gRPC</a>, either locally via a Unix Domain Socket or remotely using Transport Layer Security (TLS).</li>
</ul>
<p>In the next chapter, you will:</p>
<ul>
<li>Write your own PLCnext runtime component.</li>
<li>Call RSC services from that component.</li>
</ul>
<h1><a class="header" href="#extension-components" id="extension-components">Extension Components</a></h1>
<p>In the previous chapter, you saw how the PLCnext runtime uses factory-installed components to implement various functions.</p>
<p>It is possible to extend the PLCnext runtime with your own components. These are called <em>Extension Components</em> (also called <em>Internal Function Extensions</em>).</p>
<p>In this chapter, you will write your own extension component that is started by the PLCnext runtime, and learn more about the Application Component Framework (ACF) that makes this possible.</p>
<h2><a class="header" href="#simple-extension-component" id="simple-extension-component">Simple Extension Component</a></h2>
<p>The simplest PLCnext component is a C++ class that inherits <a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Acf_1_1ComponentBase.html"><code>Arp::System::Acf::ComponentBase</code></a>.</p>
<p>The C++ source files (<code>.hpp</code> and <code>.cpp</code>) for a simple component, called <code>MyComponent</code>, can be downloaded here:</p>
<ul>
<li><a href="samples/ch04-01-simple-component/MyProject/src/MyComponent.hpp">MyComponent.hpp</a></li>
<li><a href="samples/ch04-01-simple-component/MyProject/src/MyComponent.cpp">MyComponent.cpp</a></li>
</ul>
<p>At this point <code>MyComponent</code> is a valid PLCnext Runtime component, but it contains no functionality - this will be added later.</p>
<h3><a class="header" href="#library-singleton" id="library-singleton">Library Singleton</a></h3>
<p>Named component instances are created by the PLCnext runtime from a singleton that inherits <a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Acf_1_1LibraryBase.html"><code>Arp::System::Acf::LibraryBase</code></a>.</p>
<p>The C++ source files (<code>.hpp</code> and <code>.cpp</code>) for a singleton - called <code>MyLibrary</code> - that creates named instances of <code>MyComponent</code> can be downloaded here:</p>
<ul>
<li><a href="samples/ch04-01-simple-component/MyProject/src/MyLibrary.hpp">MyLibrary.hpp</a></li>
<li><a href="samples/ch04-01-simple-component/MyProject/src/MyLibrary.cpp">MyLibrary.cpp</a></li>
</ul>
<p>Note that both <code>MyComponent</code> and <code>MyLibrary</code> are defined in a namespace called <code>MyNamespace</code>.</p>
<h3><a class="header" href="#building-the-library" id="building-the-library">Building the Library</a></h3>
<p>You can build a shared object library containing both these classes (<code>MyComponent</code> and <code>MyLibrary</code>) using the SDK that you installed earlier.</p>
<p>The following procedure uses the build tools <code>CMake</code> (version 3.19 or above) and <code>Ninja</code>, so make sure these are also installed on the host machine. The PLCnext CLI installs an older version of CMake which does not support the <a href="https://cmake.org/cmake/help/latest/manual/cmake-presets.7.html">cmake-presets</a> feature used in this procedure.</p>
<p>Build the library as follows:</p>
<ul>
<li>
<p>On your host machine, create a project directory. Under this directory, create a sub-directory called <code>src</code>.</p>
</li>
<li>
<p>Copy the four source files to the <code>src</code> directory.</p>
</li>
<li>
<p>In the project root directory, create a <code>CMakeLists.txt</code> file containing the following text:</p>
</li>
</ul>
<pre><code class="language-cmake">﻿cmake_minimum_required(VERSION 3.13)

project(MyProject)

if(NOT CMAKE_BUILD_TYPE)
  set(CMAKE_BUILD_TYPE Release)
endif()

################# create target #######################################################

set (WILDCARD_SOURCE *.cpp)
set (WILDCARD_HEADER *.h *.hpp *.hxx)

file(GLOB_RECURSE Headers CONFIGURE_DEPENDS src/${WILDCARD_HEADER})
file(GLOB_RECURSE Sources CONFIGURE_DEPENDS src/${WILDCARD_SOURCE})
add_library(MyProject SHARED ${Headers} ${Sources})

#######################################################################################

################# project include-paths ###############################################

target_include_directories(MyProject
    PUBLIC
    $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/src&gt;)

#######################################################################################

################# include arp cmake module path #######################################

list(INSERT CMAKE_MODULE_PATH 0 &quot;${ARP_TOOLCHAIN_CMAKE_MODULE_PATH}&quot;)

#######################################################################################

################# set link options ####################################################
# WARNING: Without --no-undefined the linker will not check, whether all necessary    #
#          libraries are linked. When a library which is necessary is not linked,     #
#          the firmware will crash and there will be NO indication why it crashed.    #
#######################################################################################

target_link_options(MyProject PRIVATE LINKER:--no-undefined)

#######################################################################################

################# add link targets ####################################################

find_package(ArpDevice REQUIRED)
find_package(ArpProgramming REQUIRED)

target_link_libraries(MyProject PRIVATE ArpDevice ArpProgramming)

#######################################################################################

################# install ############################################################

string(REGEX REPLACE &quot;^.*\\(([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+).*$&quot; &quot;\\1&quot; _ARP_SHORT_DEVICE_VERSION ${ARP_DEVICE_VERSION})
install(TARGETS MyProject
    LIBRARY DESTINATION ${ARP_DEVICE}_${_ARP_SHORT_DEVICE_VERSION}/$&lt;CONFIG&gt;/lib
    ARCHIVE DESTINATION ${ARP_DEVICE}_${_ARP_SHORT_DEVICE_VERSION}/$&lt;CONFIG&gt;/lib
    RUNTIME DESTINATION ${ARP_DEVICE}_${_ARP_SHORT_DEVICE_VERSION}/$&lt;CONFIG&gt;/bin)
unset(_ARP_SHORT_DEVICE_VERSION)

#######################################################################################
</code></pre>
<ul>
<li>Also in the project root directory, create a <code>CMakePresets.json</code> file containing the following text:</li>
</ul>
<pre><code class="language-json">{
    &quot;version&quot;: 3,
    &quot;cmakeMinimumRequired&quot;: {
        &quot;major&quot;: 3,
        &quot;minor&quot;: 19,
        &quot;patch&quot;: 0
    },
    &quot;configurePresets&quot;: [
        {
            &quot;name&quot;: &quot;default&quot;,
            &quot;hidden&quot;: true,
            &quot;displayName&quot;: &quot;Default Config&quot;,
            &quot;description&quot;: &quot;Default build using Ninja generator&quot;,
            &quot;generator&quot;: &quot;Ninja&quot;,
            &quot;toolchainFile&quot;: &quot;$env{PLCNEXT_SDK_ROOT}/toolchain.cmake&quot;,
            &quot;binaryDir&quot;: &quot;${sourceDir}/bin/$env{ARP_DEVICE}_$env{ARP_DEVICE_VERSION}&quot;,
            &quot;installDir&quot;: &quot;${sourceDir}/deploy&quot;,
            &quot;cacheVariables&quot;: {
                &quot;ARP_DEVICE&quot;: &quot;$env{ARP_DEVICE}&quot;,
                &quot;ARP_DEVICE_VERSION&quot;: &quot;$env{ARP_DEVICE_VERSION}&quot;,
                &quot;CMAKE_BUILD_WITH_INSTALL_RPATH&quot;: true
            }
        },
        {
            &quot;name&quot;: &quot;build-windows-AXCF2152-2021.9.0.40&quot;,
            &quot;inherits&quot;: &quot;default&quot;,
            &quot;displayName&quot;: &quot;AXCF2152-2021.9.0&quot;,
            &quot;environment&quot;: {
                &quot;ARP_DEVICE&quot;: &quot;AXCF2152&quot;,
                &quot;ARP_DEVICE_VERSION&quot;: &quot;2021.9.0 (21.9.0.40)&quot;,
                &quot;PLCNEXT_SDK_ROOT&quot;: &quot;C:\\SDK\\AXCF2152\\2021.9&quot;
            },
            &quot;condition&quot;: {
                &quot;type&quot;: &quot;equals&quot;,
                &quot;lhs&quot;: &quot;${hostSystemName}&quot;,
                &quot;rhs&quot;: &quot;Windows&quot;
            },
            &quot;cacheVariables&quot;: {
                &quot;CMAKE_TOOLCHAIN_FILE&quot;: {
                    &quot;value&quot;: &quot;$env{PLCNEXT_SDK_ROOT}/toolchain.cmake&quot;,
                    &quot;type&quot;: &quot;FILEPATH&quot;
                }
            }
        },
        {
            &quot;name&quot;: &quot;build-linux-AXCF2152-2021.9.0.40&quot;,
            &quot;inherits&quot;: &quot;default&quot;,
            &quot;displayName&quot;: &quot;AXCF2152-2021.9.0&quot;,
            &quot;environment&quot;: {
                &quot;ARP_DEVICE&quot;: &quot;AXCF2152&quot;,
                &quot;ARP_DEVICE_VERSION&quot;: &quot;2021.9.0 (21.9.0.40)&quot;,
                &quot;PLCNEXT_SDK_ROOT&quot;: &quot;/opt/pxc/sdk/AXCF2152/2021.9&quot;
            },
            &quot;condition&quot;: {
                &quot;type&quot;: &quot;equals&quot;,
                &quot;lhs&quot;: &quot;${hostSystemName}&quot;,
                &quot;rhs&quot;: &quot;Linux&quot;
            }
        }
    ],
    &quot;buildPresets&quot;: [
        {
            &quot;name&quot;: &quot;build-linux-AXCF2152-2021.9.0.40&quot;,
            &quot;displayName&quot;: &quot;AXCF2152-2021.9.0&quot;,
            &quot;configurePreset&quot;: &quot;build-linux-AXCF2152-2021.9.0.40&quot;
        }
    ],
    &quot;testPresets&quot;: [
        {
            &quot;name&quot;: &quot;default&quot;,
            &quot;configurePreset&quot;: &quot;default&quot;,
            &quot;output&quot;: {
                &quot;outputOnFailure&quot;: true
            },
            &quot;execution&quot;: {
                &quot;noTestsAction&quot;: &quot;error&quot;,
                &quot;stopOnFailure&quot;: true
            }
        }
    ]
}
</code></pre>
<p>You may need to change the ARP targets and SDK paths in this file to suit the setup of your development machine.</p>
<ul>
<li>
<p>From the project root directory, configure, build and deploy the project:</p>
<pre><code class="language-text">$ cmake --preset=build-linux-AXCF2152-2021.9.0.40
</code></pre>
<pre><code class="language-text">$ cmake --build --preset=build-linux-AXCF2152-2021.9.0.40 --target all
</code></pre>
<pre><code class="language-text">$ cmake --build --preset=build-linux-AXCF2152-2021.9.0.40 --target install
</code></pre>
</li>
</ul>
<p>You will see from the output that a shared object library, <code>libMyProject.so</code>, has been created. This contains the component called <code>MyNamespace::MyComponent</code> and the singleton called <code>MyNamespace::MyLibrary</code>.</p>
<ul>
<li>
<p>On the PLC, create a project directory e.g. <code>/opt/plcnext/projects/MyProject</code>, and a <code>lib</code> subdirectory.</p>
</li>
<li>
<p>Copy the shared object library from the host to the target:</p>
<pre><code class="language-text">$ scp deploy/AXCF2152_21.9.0.40/Release/lib/libMyProject.so admin@192.168.1.10:~/projects/MyProject/lib
</code></pre>
</li>
</ul>
<h3><a class="header" href="#instantiating-the-component" id="instantiating-the-component">Instantiating the Component</a></h3>
<p>Now that the shared object library containing the extension component is on the target, the PLCnext runtime must be instructed to create an instance of <code>MyComponent</code>.</p>
<ul>
<li>On the host, in the project root directory, create a file named <code>MyProject.acf.config</code>, containing the following text:</li>
</ul>
<pre><code class="language-xml">﻿&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;AcfConfigurationDocument
  xmlns=&quot;http://www.phoenixcontact.com/schema/acfconfig&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://www.phoenixcontact.com/schema/acfconfig.xsd&quot;
  schemaVersion=&quot;1.0&quot; &gt;

  &lt;Processes&gt;
    &lt;Process name=&quot;MyProcess&quot; settingsPath=&quot;$ARP_ACF_SETTINGS_FILE$&quot; /&gt;
  &lt;/Processes&gt;

  &lt;Libraries&gt;
    &lt;Library name=&quot;MyProject&quot; binaryPath=&quot;$ARP_PROJECTS_DIR$/MyProject/lib/libMyProject.so&quot; /&gt;
  &lt;/Libraries&gt;

  &lt;Components&gt;
    &lt;Component name=&quot;MyComponentInstance&quot; type=&quot;MyNamespace::MyComponent&quot; library=&quot;MyProject&quot; process=&quot;MyProcess&quot; /&gt;
  &lt;/Components&gt;

&lt;/AcfConfigurationDocument&gt;
</code></pre>
<ul>
<li>
<p>Copy this ACF configuration file from the host to the target:</p>
<pre><code class="language-text">$ scp MyProject.acf.config admin@192.168.1.10:~/projects/Default
</code></pre>
<p>The PLCnext runtime will automatically load this configuration file, since the <code>Default.acf.config</code> file in the same directory includes all files that match the  pattern <code>*.acf.config</code>. The ACF configuration file for <code>MyProject</code> instructs the PLCnext runtime to:</p>
<ul>
<li>Create a new child process called <code>MyProcess</code>.</li>
<li>Load the shared object library and name it <code>MyProject</code>. This name can be considered an alias, or shorthand reference, to the shared object library. This name does not have any relationship to the name of the class in the shared object library that inherited <code>LibraryBase</code>.</li>
<li>Create an instance of <code>MyNamespace::MyComponent</code>, called <code>MyComponentInstance</code>, from the library named <code>MyProject</code>, in the process named <code>MyProcess</code>.</li>
</ul>
<p>The <code>process</code> parameter is optional and, if omitted, the component instance will be created in the main PLCnext Runtime process (called <code>MainProcess</code>).</p>
</li>
<li>
<p>Restart the PLCnext runtime:</p>
<pre><code class="language-text"># sudo /etc/init.d/plcnext restart &amp;&amp; tail -f -n 0 /opt/plcnext/logs/Output.log
(result)
</code></pre>
</li>
</ul>
<p>Among the messages that appear in the <code>Output.log</code> file, you should see the following:</p>
<pre><code class="language-text">INFO  - Process 'MyProcess' started successfully.
</code></pre>
<pre><code class="language-text">INFO  - Library 'MyProject' in process 'MyProcess' loaded.
</code></pre>
<pre><code class="language-text">INFO  - Component 'MyComponentInstance' in process 'MyProcess' created.
</code></pre>
<p>Your first PLCnext runtime extension component instance is now running!</p>
<h1><a class="header" href="#component-methods" id="component-methods">Component Methods</a></h1>
<h1><a class="header" href="#component-library-singleton" id="component-library-singleton">Component Library Singleton</a></h1>
<h1><a class="header" href="#component-example-tcp-server" id="component-example-tcp-server">Component Example: TCP Server</a></h1>
<h1><a class="header" href="#using-rsc-services" id="using-rsc-services">Using RSC Services</a></h1>
<h1><a class="header" href="#worker-threads" id="worker-threads">Worker Threads</a></h1>
<h1><a class="header" href="#interactive-course" id="interactive-course">Interactive Course</a></h1>
<h1><a class="header" href="#creating-rsc-services" id="creating-rsc-services">Creating RSC Services</a></h1>
<h1><a class="header" href="#creating-gds-variables---part-1" id="creating-gds-variables---part-1">Creating GDS variables - Part 1</a></h1>
<h1><a class="header" href="#plcnext-cli" id="plcnext-cli">PLCnext CLI</a></h1>
<h1><a class="header" href="#creating-gds-variables---part-2" id="creating-gds-variables---part-2">Creating GDS variables - Part 2</a></h1>
<h1><a class="header" href="#connecting-gds-variables" id="connecting-gds-variables">Connecting GDS Variables</a></h1>
<h1><a class="header" href="#rest-api" id="rest-api">REST API</a></h1>
<h1><a class="header" href="#real-time-programming" id="real-time-programming">Real Time Programming</a></h1>
<p>Define real-time.
(this is familiar to PLC programmers)</p>
<p>For many components - including many components of the PLCnext runtime - real-time performance is not necessary.</p>
<p>Linux kernel includes PREEMPT-RT patch, so it is possible to create real-time threads. However, this requires deep experience of C++ and OS thread handling.</p>
<p>The PLCnext runtime makes it simple to write C++ programs that run in real time.</p>
<ul>
<li>Execution and synchronisation manager.</li>
<li>The ESM borrows some terminology from the IEC 61131 standard - &quot;Tasks&quot; (the things that execute in real time), and &quot;programs&quot; (code that is executed whenever a task is run). Link to overview of ESM in info center, including task and program scheduling.</li>
</ul>
<p>The ESM is configured using an esm.config file:</p>
<ul>
<li>Example.</li>
<li>Task definition</li>
<li>Program instances assigned to tasks.</li>
</ul>
<p>In this chapter, you will create a real-time C++ program and run it on the target.</p>
<h2><a class="header" href="#c-programs" id="c-programs">C++ Programs</a></h2>
<p>PLCnext programs created in C++ must inherit from ProgramBase.</p>
<p>Program instances are created using a special type of PLCnext component. This component must inherit ProgramComponentBase, and the corresponding library singleton must inherit ProgramLibraryBase. When the PLCnext runtime starts, this library is loaded not by the ACF, but by the <em>Program Library Manager</em> (PLM). The PLM creates non-real-time component instances in a similar way to the ACF, but it also has the ability to create instances of real-time programs.</p>
<p>A high-level comparison of the ACF and the PLM is given in the <a href="https://www.plcnext.help/te/PLCnext_Runtime/Managing_of_components.htm">PLCnext Technology Info Center</a>.</p>
<p>We can again use plcncli to help us with this project.</p>
<ul>
<li>Generate a project.</li>
</ul>
<h3><a class="header" href="#program-component-features" id="program-component-features">Program Component features</a></h3>
<ul>
<li>familiar from ACF components.</li>
</ul>
<h3><a class="header" href="#program-features" id="program-features">Program features</a></h3>
<ul>
<li>Program Execute method. That's it! This is called every time the real-time Task executes.</li>
<li>Can define GDS ports - e.g. for connecting to I/O.</li>
<li>MUST NOT do anything that blocks the Execute method - including GDS calls, file access, database access, tcp socket comms, etc.</li>
<li>Any non-real-time work can be done in the Component (each Program has a pointer to a component). Don't hold references to Program instances in the Component - while components live for the lifetime of the PLCnext runtime, Program instances are more ethereal.</li>
</ul>
<h3><a class="header" href="#building" id="building">Building</a></h3>
<h3><a class="header" href="#deploying" id="deploying">Deploying</a></h3>
<h3><a class="header" href="#configuring" id="configuring">Configuring</a></h3>
<ul>
<li>plm.config instead of acf.config file, since the component must be loaded by the PLM rather than the ACF.</li>
<li>esm.config file.</li>
</ul>
<h3><a class="header" href="#running" id="running">Running</a></h3>
<h2><a class="header" href="#configuring-io" id="configuring-io">Configuring I/O</a></h2>
<p>We want to start the Axioline, Interbus and/or Profinet bus and create GDS variables for all process data.</p>
<p>This process uses Technology Independent Configuration (<code>.tic</code>) files. These are in a proprietary XML format.</p>
<p>Offline configuration:</p>
<ul>
<li>Use NetCI tool</li>
<li>Example using NetCI to generate config, then connect I/O to C++ program ports</li>
</ul>
<p>Automatic and/or dynamic configuration:</p>
<ul>
<li>Use AxioMaster service, for example (BusConductor example in Github)</li>
</ul>
<h2><a class="header" href="#iec-61131-3-programs" id="iec-61131-3-programs">IEC 61131-3 Programs</a></h2>
<p>Real-time programs can be written in the four languages defined by the IEC standard - Ladder (LD), Function Block Diagram (FBD), Structured Text (ST) and Sequential Function Chart (SFC). Programs written in these languages run on the <a href="https://www.plcnext.help/te/Programming/Csharp/eCLR_Programming_System.htm">Embedded Common Language Runtime</a> (ECLR).</p>
<h3><a class="header" href="#eclr" id="eclr">ECLR</a></h3>
<p>As the name suggests, the Embedded Common Language Runtime is based on <a href="https://docs.microsoft.com/en-us/dotnet/standard/clr">Microsoft's Common Language Runtime</a> (CLR), which is required to run C# and other .NET programs on Windows platforms. Unlike the CLR, the ECLR is specifically designed to run real-time, deterministic programs on embedded devices. The ECLR contains a sub-set of CLR libraries, along with specialised libraries added by Phoenix Contact.</p>
<h3><a class="header" href="#plcnext-engineer" id="plcnext-engineer">PLCnext Engineer</a></h3>
<p>(outside the scope of this book)</p>
<p>Includes the following features:</p>
<ul>
<li>Write programs in IEC 61131 languages and C#, which run on the ECLR</li>
<li>Integrates with Matlab Simulink</li>
<li>Import C++ programs</li>
<li>Tabular configuration of I/O</li>
<li>Tabular configuration of ESM Tasks and program instances, using both IEC and C++ programs</li>
<li>Tabular configuration of GDS variable connections.</li>
<li>Automatically generates the following configuration files: .tic, gds.config, esm.config and plm.config.</li>
<li>Debugging features including GDS variable &quot;Watch&quot; window, Force variables, notification viewer.</li>
</ul>
<h1><a class="header" href="#other-programming-tools" id="other-programming-tools">Other Programming Tools</a></h1>
<p>Eclipse add-in.
Visual Studio extension (Windows only).</p>
<h1><a class="header" href="#extension-processes" id="extension-processes">Extension Processes</a></h1>
<p>You have seen how to use the Application Component Framework to extend the PLCnext runtime with your own components and programs. By using the ACF, these components are integrated tightly with the PLCnext runtime, where they are treated in exactly the same way as factory-installed components.</p>
<p>It is also possible to extend the PLCnext runtime with extension <em>processes</em> (also called <em>External Function Extensions</em>).</p>
<p>Extension processes are useful for PLCnext Control functions that must be started and stopped with the PLCnext runtime - just like extension components - but that cannot use the ACF. A typical example: When porting a third-party PLC runtime to the PLCnext Control platform, it may be impractical to re-design the source code into PLCnext runtime components.</p>
<p>Extension processes also provide the ultimate answer to the question posed earlier in this book: <em>How can an application read and write inputs and outputs from/to the I/O modules attached to the PLC?</em> You have already seen how to read and write GDS variable data using RSC services and the REST API, and these interfaces can be used to access PLC I/O from any process running outside the PLCnext runtime. However, I/O data exchange using these methods is only suitable for non-deterministic applications. The PLCnext runtime provides a mechanism for extension processes to read and write PLC I/O in a deterministic way. This deterministic access to PLC I/O makes extension processes ideally suited to third-party runtimes like <a href="https://www.plcnextstore.com/#/220">Codesys</a>, <a href="https://www.plcnextstore.com/#/168">Four-Zero</a> and <a href="https://www.eclipse.org/4diac/en_rte.php">4diac</a>.</p>
<p>A high-level comparison of extension components (internal function extensions) and extension processes (external function extensions) is given in the <a href="https://www.plcnext.help/te/PLCnext_Runtime/Function_extensions_for_internal_processes.htm">PLCnext Technology Info Center</a>.</p>
<p>TODO:</p>
<ul>
<li>(Add an extra step to Sample Runtime - just start the process, don't start the ANSI-C components).</li>
<li>Answer questions from Jan-Willem about the block diagram - draw on earlier chapters.</li>
</ul>
<h1><a class="header" href="#what-next" id="what-next">What Next</a></h1>
<ul>
<li>Revise what you've learned in this book.</li>
<li>Find out more about other parts of the PLCnext Technology ecosystem.</li>
<li>Get involved!</li>
</ul>
<h2><a class="header" href="#the-big-picture" id="the-big-picture">The Big Picture</a></h2>
<p>This book has covered almost every part of the PLCnext Control platform, including an extensive step-by-step exploration of the PLCnext runtime. At this stage, it is beneficial to zoom out and take a look at how all the pieces of the PLCnext Control platform fit together. One of the best ways to do this is to work through the interactive online course <a href="https://elearning.plcnext.help/PLCnTech_Basics/story.html"><em>PLCnext Technology Basics</em></a> on the PLCnext Community website. In addition to the topics covered in this book, the course will introduce you to the other parts of the PLCnext Technology Ecosystem, including PLCnext Engineer and <a href="https://www.plcnextstore.com">the PLCnext Store</a>.</p>
<h2><a class="header" href="#get-involved" id="get-involved">Get Involved!</a></h2>
<p>PLCnext Community. This includes a discussion forum and a Makers Blog, both of which are open to public contributions.</p>
<p>Github. Contribute to open-source projects.</p>
<h1><a class="header" href="#appendix" id="appendix">Appendix</a></h1>
<h2><a class="header" href="#appendix-a-plcnext-control-programming-resources" id="appendix-a-plcnext-control-programming-resources">Appendix A: PLCnext Control programming resources</a></h2>
<h3><a class="header" href="#general-development-guides" id="general-development-guides">General Development Guides</a></h3>
<ul>
<li>
<p>Savushkin R&amp;D, Github project: <a href="https://github.com/savushkin-r-d/PLCnext-howto">PLCnext-howto</a></p>
</li>
<li>
<p>Phoenix Contact USA, Github project: <a href="https://github.com/plcnextusa/PLCnext-Guides">PLCnext-Guides</a></p>
</li>
</ul>
<h3><a class="header" href="#c-1" id="c-1">C++</a></h3>
<ul>
<li>
<p>PLCnext Info Center - <a href="https://www.plcnext.help/te/Programming/Cpp/Cpp-programming.htm">C++ programming on PLCnext Technology</a>.</p>
</li>
<li>
<p>PLCnext Info Center - <a href="https://www.plcnext.help/te/Programming/Cpp/PLCnext_API_documentation.htm">PLCnext API documentation</a>.</p>
</li>
<li>
<p>PLCnext Technology Github projects:</p>
<ul>
<li>CppExamples. &quot;<a href="https://github.com/PLCnext/CppExamples">PLCnext/CppExamples</a>&quot;</li>
<li>Real Time DataLogger. &quot;<a href="https://github.com/PLCnext/PLCnext_RT_Datalogger">PLCnext/PLCnext_RT_Datalogger</a>&quot;</li>
<li>Bus Conductor. &quot;<a href="https://github.com/PLCnext/BusConductor">PLCnext/BusConductor</a>&quot;</li>
<li>SampleRuntime. &quot;<a href="https://github.com/PLCnext/SampleRuntime">PLCnext/SampleRuntime</a>&quot;</li>
</ul>
</li>
<li>
<p>Github project: &quot;<a href="https://github.com/sdurbin-pxc/plcnext-io-drivers-cpp">sdurbin-pxc/plcnext-io-drivers-cpp</a>&quot;.</p>
</li>
<li>
<p>Björn Sauer, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/how-to-use-visual-studio-code-to-write-c-for-plcnext/">How to use Visual Studio Code to write C++ for PLCnext</a>&quot;.</p>
</li>
<li>
<p>Björn Sauer, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/automate-your-development-workflow-with-visual-studio-code/">Automate your development workflow with Visual Studio Code</a>&quot;.</p>
</li>
<li>
<p>Github project: &quot;<a href="https://github.com/savushkin-r-d/PLCnext-howto/tree/master/HowTo%20install%20Linux%20(Ubuntu)%20tools%20for%20C%2B%2B%20programming%20with%20Eclipse%20IDE">How to configure Eclipse® to program and crosscompile for the AXC F 2152 on Ubuntu 18.04 LTS</a>&quot;.</p>
</li>
<li>
<p>Martin Boers, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/how-to-include-an-open-source-library-in-your-own-c-project/">How to include an open-source library in your own C++ project</a>&quot;.</p>
</li>
<li>
<p>Nils Hettig, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/how-to-store-data-in-sqlite-in-a-plcnext-c-project/">How to store data in SQLite in a PLCnext C++ project</a>&quot;.</p>
</li>
<li>
<p>Damian Bombeeck, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/how-to-install-libcurl-on-your-axc-f-2152-controller/">How to install libcurl on your AXC F 2152 controller</a>&quot;.</p>
</li>
<li>
<p>Damian Bombeeck, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/tutorial-using-the-axc-f-2152-controller-with-microsoft-azure/">Tutorial: Using the AXC F 2152 controller with Microsoft Azure</a>&quot;.</p>
</li>
<li>
<p>Oliver Warneke, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/connect-plcnext-remotly-to-rs232-rs485-via-pseudo-tty/">Connecting PLCnext PLCs to remote RS232/RS485 via pseudo TTY</a>&quot;.</p>
</li>
<li>
<p>Björn Sauer, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/use-the-ixmlserializable-interface-to-populate-a-class-from-a-xml-file/">Use the IXMLSerializable interface to populate a class from a XML file</a>&quot;.</p>
</li>
<li>
<p>Björn Sauer, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/how-to-define-complex-gds-ports-and-connect-them-to-gds-port-in-iec-code/">How to define complex GDS Ports and connect them to GDS Port in IEC code</a>&quot;.</p>
</li>
<li>
<p>Peer Michael Gaus, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/pugixml-a-light-weight-xml-processing-library-with-xpath-support/">pugixml a light-weight XML processing library with XPATH support</a>&quot;.</p>
</li>
<li>
<p>Peer Michael Gaus, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/linq-the-list-processing-library-for-c/">Linq the list processing library for C++</a>&quot;.</p>
</li>
<li>
<p>Peer Michael Gaus, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/c-testing-with-catch2/">c++ testing with catch2</a>&quot;.</p>
</li>
</ul>
<h3><a class="header" href="#rust-1" id="rust-1">Rust</a></h3>
<ul>
<li>PLCnext Technology - Rust Sample Runtime. &quot;<a href="https://github.com/PLCnext/rust-sample-runtime">PLCnext/rust-sample-runtime</a>&quot;</li>
</ul>
<h3><a class="header" href="#docker" id="docker">Docker</a></h3>
<ul>
<li>
<p>PLCnext Technology - Docker and Balena Engine: &quot;<a href="https://github.com/PLCnext/Docker_GettingStarted">PLCnext/Docker_GettingStarted</a>&quot;.</p>
</li>
<li>
<p>Martin Boers, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/how-to-turn-an-axc-f-2152-into-an-aws-greengrass-device/">How to turn an AXC F 2152 into an AWS Greengrass device</a>&quot;.</p>
</li>
</ul>
<h3><a class="header" href="#java" id="java">Java</a></h3>
<ul>
<li>Marcel Luhmann, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/java-application-on-an-axc-f-2152/">Java Application on AXC F 2152</a>&quot;.</li>
</ul>
<h3><a class="header" href="#nodejs-and-node-red" id="nodejs-and-node-red">Node.js and Node-Red</a></h3>
<ul>
<li>
<p>Stijn Noppe, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/install-node-red-and-pm2-offline/">Install Node-RED and PM2 offline</a>&quot;</p>
</li>
<li>
<p>Stijn Noppe, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/installing-node-js-on-rfc-4072s/">Installing Node.js on RFC 4072S</a>&quot;.</p>
</li>
<li>
<p>Dries Van Laerhoven, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/node-red-and-getting-started-with-docker/">Node-RED and getting started with Docker</a>&quot;.</p>
</li>
<li>
<p>Stefan Brinkmann, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/node-red-with-docker-tips-and-best-practice/">Node-Red with docker tips and best practice</a>&quot;.</p>
</li>
<li>
<p>Github project: &quot;<a href="https://github.com/plcnextusa/node-red">plcnextusa/node-red</a>&quot;.</p>
</li>
<li>
<p>Damian Bombeeck, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/tutorial-using-the-axc-f-2152-controller-with-microsoft-azure/">How to connect PLCnext to Microsoft® Azure® by Node.js SDK</a>&quot;.</p>
</li>
<li>
<p>Nodejs package for communicating with a Phoenix Contact TC Router: &quot;<a href="https://github.com/PhoenixContactUSA/node-tcrouter">PhoenixContactUSA/node-tcrouter</a>&quot;.</p>
</li>
<li>
<p>Node-red nodes for communicating with a Phoenix Contact TC Router: &quot;<a href="https://github.com/PhoenixContactUSA/node-red-contrib-tcrouter">PhoenixContactUSA/node-red-contrib-tcrouter</a>&quot;</p>
</li>
<li>
<p>Michel Schneider, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/how-to-send-a-mail-via-node-red/">How to send a mail via Node-Red</a>&quot;.</p>
</li>
<li>
<p>Stijn Noppe, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/knx-opc-ua-gateway-with-node-red/">KNX - OPC UA Gateway with Node-Red</a>&quot;.</p>
</li>
<li>
<p>Michel Schneider, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/how-to-create-a-simple-mqtt-broker-on-the-axl-f-2152-with-node-red/">How to create a simple MQTT broker on the AXC F 2152 with Node-Red</a>&quot;.</p>
</li>
</ul>
<h3><a class="header" href="#python" id="python">Python</a></h3>
<ul>
<li>
<p>Python-Startersguide. &quot;<a href="https://github.com/pxcbe/python-startersguide">pxcbe/python-startersguide</a>&quot;.</p>
</li>
<li>
<p>Nils Hettig, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/read-and-write-plc-process-data-with-python/">Read and Write PLC Process Data with Python</a>&quot;</p>
</li>
<li>
<p>Stijn Noppe, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/installing-pip-without-ipkg/">Installing PIP without IPKG</a>&quot;.</p>
</li>
<li>
<p>Nils Hettig, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/package-managers-for-python-on-plcnext-devices/">Install Miniconda on PLCnext Devices</a>&quot;.</p>
</li>
<li>
<p>Yuri Chamarelli, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/modbus-tcp-with-python-on-axc-f-2152/">Modbus TCP with Python on AXC F 2152</a>&quot;.</p>
</li>
<li>
<p>Github project: aiohttp for AXCF2152 (2020.0). &quot;<a href="https://github.com/Songyantao-PXCCN/aiohttp/tree/master/2020.0">Songyantao-PXCCN/aiohttp</a>&quot;.</p>
</li>
<li>
<p>Github project: PLCnext connection to the REST api. &quot;<a href="https://github.com/dclark3774/PythonRESTapi">dclark3774/PythonRESTapi</a>&quot;.</p>
</li>
<li>
<p>Alexander Skachkov, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/a-simple-rest-based-library-to-use-variables-in-plcnext-axc-f-2152-plc-from-python/">A simple REST based library to use variables in PLCnext AXC F 2152 PLC from Python</a>&quot;.</p>
</li>
<li>
<p>Frederik Leempoels, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/use-plcnext-to-wakeonlan-wol-your-pc/">Use PLCnext to WakeOnLan (WoL) Your PC</a>&quot;.</p>
</li>
<li>
<p>Dries Van Laerhoven, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/containerized-opencv-python-on-plcnext/">OpenCV - Python, Red Light detection on PLCnext</a>&quot;.</p>
</li>
<li>
<p>Dries Van Laerhoven, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/machine-learning-on-plcnext/">Machine Learning on PLCnext</a>&quot;.</p>
</li>
</ul>
<h3><a class="header" href="#c-2" id="c-2">C#</a></h3>
<ul>
<li>
<p>Martin Boers, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/how-to-create-a-simple-plcnext-console-application-in-c/">How to create a simple PLCnext console application in C#</a>&quot;</p>
</li>
<li>
<p>Björn Sauer, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/install-the-net-core-runtime-3-0-0-on-the-axc-f-2152/">Install the .NET Core runtime 3.0.0 on the AXC F 2152</a>&quot;.</p>
</li>
<li>
<p>Kay Suttkuss, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/getting-started-with-c-and-visual-studio-code-on-plcnext/">Getting started with C# and .Net Core 3.0 on PLCnext</a>&quot;.</p>
</li>
<li>
<p>Kay Suttkuss, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/remote-debugging-of-a-net-core-application-with-vs-code-on-plcnext/">Remote Debugging of a .Net Core application with VS Code on PLCnext</a>&quot;.</p>
</li>
</ul>
<h3><a class="header" href="#go" id="go">Go</a></h3>
<ul>
<li>
<p>Dries Van Laerhoven, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/getting-started-with-golang-on-plcnext/">Getting started with Go on PLCnext</a>&quot;.</p>
</li>
<li>
<p>Dries Van Laerhoven, PLCnext Community Makers Blog post: &quot;<a href="https://www.plcnext-community.net/makersblog/serving-static-files-with-go/">Serving static files with Go</a>&quot;.</p>
</li>
</ul>
<h2><a class="header" href="#appendix-b-list-of-rsc-services" id="appendix-b-list-of-rsc-services">Appendix B: List of RSC Services</a></h2>
<p>The following table lists the RSC services that are available in the PLCnext runtime, including links to more information, API documentation and programming examples.</p>
<table><thead><tr><th align="left">Service</th><th align="left">Methods</th><th align="left">More<br/>Information</th></tr></thead><tbody>
<tr><td align="left">Device control</td><td align="left">Restart Device<br/>Start Firmware Update<br/>Reset to Factory Defaults</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Device_1_1Interface_1_1Services_1_1IDeviceControlService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_device_interface_services.htm#IDeviceControlService" title="PLCnext Info Center">📄</a></td></tr>
<tr><td align="left">Device information</td><td align="left">Get Item<br/>Get Items</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Device_1_1Interface_1_1Services_1_1IDeviceInfoService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_device_interface_services.htm#IDeviceInfoService" title="PLCnext Info Center">📄</a></td></tr>
<tr><td align="left">Device settings</td><td align="left">Read Value<br/>Read Values<br/>Write Value<br/>Write Values</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Device_1_1Interface_1_1Services_1_1IDeviceSettingsService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_device_interface_services.htm#IDeviceSettingsService" title="PLCnext Info Center">📄</a></td></tr>
<tr><td align="left">Device status</td><td align="left">Get Item<br/>Get Items</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Device_1_1Interface_1_1Services_1_1IDeviceStatusService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_device_interface_services.htm#IDeviceStatusService" title="PLCnext Info Center">📄</a></td></tr>
<tr><td align="left">PLC information</td><td align="left">Get Info<br/>Get Infos</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Plc_1_1Domain_1_1Services_1_1IPlcInfoService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">PLC manager (deprecated)</td><td align="left">Load<br/>Start<br/>Stop<br/>Reset<br/>Get PLC State</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Plc_1_1Domain_1_1Services_1_1IPlcManagerService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">PLC manager</td><td align="left">Load<br/>Start<br/>Stop<br/>Reset<br/>Get PLC State<br/>Change<br/>Restart</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Plc_1_1Domain_1_1Services_1_1IPlcManagerService2.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/PLCnext_Runtime/System_manager.htm#PLCManager" title="PLCnext Info Center">📄</a></td></tr>
<tr><td align="left">Global Data Space<br/>variable access</td><td align="left">Read Single<br/>Read<br/>Write Single<br/>Write</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Plc_1_1Gds_1_1Services_1_1IDataAccessService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_GDS_services.htm#IDataAccessService" title="PLCnext Info Center">📄</a> <a href="https://github.com/PLCnext/CppExamples/blob/master/Examples/DataAccessExample/README.MD" title="Programming example">🖥</a></td></tr>
<tr><td align="left">Global Data Space<br/>variable force control</td><td align="left">Add Variable<br/>Remove Variable<br/>Get Variables<br/>Reset<br/>Is Forcable (<em>sic</em>)<br/>Is Active</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Plc_1_1Gds_1_1Services_1_1IForceService.html" title="API description">🔍</a> <a href="https://github.com/PLCnext/CppExamples/blob/master/Examples/ForceExample/README.MD" title="Programming example">🖥</a></td></tr>
<tr><td align="left">Global Data Space<br/>variable subscription</td><td align="left">Create Subscription<br/>Create Recording Subscription<br/>Add Variable<br/>Add Variables<br/>Remove Variable<br/>Subscribe<br/>Resubscribe<br/>Unsubscribe<br/>Delete Subscription<br/>Get Variable Infos<br/>Get Time Stamped Variable Infos<br/>Get Record Infos<br/>Read Values<br/>Read Time Stamped Values<br/>Read Records</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Plc_1_1Gds_1_1Services_1_1ISubscriptionService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_GDS_services.htm#ISubscriptionService" title="PLCnext Info Center">📄</a> <a href="https://github.com/PLCnext/CppExamples/blob/master/Examples/SubscriptionExample/README.MD" title="Programming example">🖥</a></td></tr>
<tr><td align="left">Retentive variable management</td><td align="left">Generate Backup File <br/>Prepare Latest Backup File For Restoring</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Plc_1_1Retain_1_1Services_1_1IRetainManagerService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/PLCnext_Runtime/Extended_retain_handling.htm" title="PLCnext Info Center">📄</a></td></tr>
<tr><td align="left">Enumerate GDS variables</td><td align="left">Find Instances By Typename</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Plc_1_1Meta_1_1Services_1_1IDataTraverserService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Acyclic Axioline communication</td><td align="left">PDI Read <br/>PDI Write</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1Axioline_1_1Services_1_1IAcyclicCommunicationService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_Axioline_Services.htm#IAcyclicCommunicationService" title="PLCnext Info Center">📄</a></td></tr>
<tr><td align="left">Axioline master access</td><td align="left">Axio Control<br/>Create Configuration<br/>Read Configuration<br/>Write Configuration<br/>Activate Configuration<br/>Deactivate Configuration<br/>Reset Master</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1Axioline_1_1Services_1_1IAxioMasterService.html" title="API description">🔍</a> <a href="https://github.com/PLCnext/BusConductor" title="Programming example">🖥</a></td></tr>
<tr><td align="left">Interbus master access</td><td align="left">Interbus Control<br/>Create Configuration<br/>Read Configuration<br/>Write Configuration<br/>Activate Configuration<br/>Deactivate Configuration<br/>Start Data Transfer<br/>Stop Data Transfer<br/>Alarm Stop</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1Interbus_1_1Services_1_1IInterbusMasterService.html" title="API description">🔍</a> <a href="https://github.com/PLCnext/BusConductor" title="Programming example">🖥</a></td></tr>
<tr><td align="left">PCP device communication</td><td align="left">PCP Initiate<br/>PCP Abort<br/>PCP Identify<br/>PCP Status<br/>PCP Read<br/>PCP Write</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1Interbus_1_1Services_1_1IPcpService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Acyclic Profinet communication</td><td align="left">Record Read<br/>Record Write</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1ProfinetStack_1_1Controller_1_1Services_1_1IAcyclicCommunicationService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_PROFINET_Services.htm" title="PLCnext Info Center">📄</a></td></tr>
<tr><td align="left">Conversion of Profinet<br/>addresses and node IDs</td><td align="left">Address To ID<br/>ID To Address</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1ProfinetStack_1_1Controller_1_1Services_1_1IAddressConversionService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Profinet alarm receiver</td><td align="left">Receive Alarm<br/>Enable Auto Alarm Acknowledge</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1ProfinetStack_1_1Controller_1_1Services_1_1IAlarmService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Profinet Application Relationships<br/>(AR) info</td><td align="left">Get All AR Info<br/>Get All AR Attribute Names<br/>Get Attribute Value<br/>Get Attribute Values<br/>Get AR Diagnosis</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1ProfinetStack_1_1Controller_1_1Services_1_1IArDataService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Profinet Application Relationships<br/>(AR) manager</td><td align="left">Get AR State<br/>Start AR<br/>Stop AR</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1ProfinetStack_1_1Controller_1_1Services_1_1IArManagementService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Profinet Application Relationships<br/>(AR) statistics</td><td align="left">Read<br/>Read Changes<br/>Read Missed Frames Global<br/>Reset</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1ProfinetStack_1_1Controller_1_1Services_1_1IArStatisticService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Profinet system configuration</td><td align="left">Read<br/>Write<br/>Get Controller Name<br/>Get Device Names</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Io_1_1ProfinetStack_1_1System_1_1Services_1_1IConfigurationService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">File System Information</td><td align="left">Get Supported Traits<br/>Get Permissions<br/>Add Permissions<br/>Remove Permissions<br/>Get File System Traits Entry<br/>Get Space Info<br/>Get Root Directories<br/></td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Commons_1_1Services_1_1Io_1_1IFileSystemInfoService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Directory Operations</td><td align="left">Exists<br/>Create<br/>Delete<br/>Clear<br/>Move<br/>Copy<br/>Enumerate File System Entries<br/>Enumerate File System Traits Entries</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Commons_1_1Services_1_1Io_1_1IDirectoryService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">File Operations</td><td align="left">Exists<br/>Write<br/>Read<br/>Delete<br/>Move<br/>Copy</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Commons_1_1Services_1_1Io_1_1IFileService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Authorization Info</td><td align="left">HasPermissionFor</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-9/classArp_1_1System_1_1Um_1_1Services_1_1IAuthorizationInfoService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Password Authentication</td><td align="left">CreateSession<br/>CloseSession</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-9/classArp_1_1System_1_1Security_1_1Services_1_1IPasswordAuthenticationService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">User Session</td><td align="left">GetSessionId<br/>GetSecurityTokenFromSessionId<br/>GetSessionProperty<br/>SetSessionProperty<br/>DeleteSessionProperty<br/>IsSessionActive</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-9/classArp_1_1System_1_1Um_1_1Services_1_1ISessionService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Device Identity Validator</td><td align="left">Validate</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Commons_1_1Services_1_1Security_1_1IDeviceIdentityValidatorService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">License Status</td><td align="left">Get License Status</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Lm_1_1Services_1_1ILicenseStatusService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Notification Manager</td><td align="left">Register Notification<br/>Unregister Notification<br/>Send Notification<br/>Get Notification Name<br/>Get Notification Name ID<br/>Get Notification Name IDs By Status<br/>Get All Known Notification Name IDs<br/>Get Notification Registration<br/>Get Payload Type ID<br/>Get Payload Type Name<br/>Get Number Of Submitted Notifications</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1System_1_1Nm_1_1Services_1_1INotificationManagerService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Notifications/Notifications_with_Cpp.htm" title="PLCnext Info Center">📄</a> <a href="https://github.com/PLCnext/CppExamples/blob/master/Examples/NotificationExample/README.MD" title="Programming example">🖥</a></td></tr>
<tr><td align="left">Notification logger</td><td align="left">Query Stored Notifications<br/>Query Notifications<br/>Delete Notifications<br/>List Archives<br/>Get Archive Configuration<br/>Set Archive Configuration<br/>Reset Archive Configuration To Files</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Services_1_1NotificationLogger_1_1Services_1_1INotificationLoggerService.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/Querying_notifications_via_RSC.htm" title="PLCnext Info Center">📄</a> <a href="https://github.com/PLCnext/CppExamples/blob/master/Examples/NotificationExample/README.MD" title="Programming example">🖥</a></td></tr>
<tr><td align="left">Data Logger</td><td align="left">List Session Names<br/>Create Session<br/>Remove Session<br/>Start Session<br/>Stop Session<br/>Configure Session<br/>Get Session Configuration<br/>Get Session State<br/>Set Variables<br/>Get Logged Variables<br/>Read Variables Data<br/>Get Rotated File Names<br/>Get Session Names<br/>Set Trigger Condition</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Services_1_1DataLogger_1_1Services_1_1IDataLoggerService2.html" title="API description">🔍</a> <a href="https://www.plcnext.help/te/Service_Components/Remote_Service_Calls_RSC/RSC_IDataLoggerService2.htm" title="PLCnext Info Center">📄</a> <a href="https://github.com/PLCnext/PLCnext_RT_Datalogger" title="Programming example">🖥</a></td></tr>
<tr><td align="left">LTTng trace controller</td><td align="left">Is Session Daemon Alive<br/>Load Session Configuration<br/>List Sessions<br/>Start Session<br/>Stop Session<br/>Destroy Session<br/>Load Tracepoint Lib<br/>Unload Tracepoint Lib<br/>Trigger Saving Trace Outputs<br/>Is Session In Snapshot Mode<br/>Is Session Enabled<br/>Is Session Loaded</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Services_1_1TraceController_1_1Services_1_1ITraceControllerService.html" title="API description">🔍</a></td></tr>
<tr><td align="left">Network load limiter control</td><td align="left">Get Settings<br/>Set Settings<br/>Set Byte Limit<br/>Set Packet Limit<br/>Enable Byte Limiter<br/>Disable Byte Limiter<br/>Enable Packet Limiter<br/>Disable Packet Limiter<br/>Get State</td><td align="left"><a href="https://api.plcnext.help/api_docs_2021-0-LTS/classArp_1_1Hardware_1_1Nim_1_1Services_1_1INetloadLimiterService.html" title="API description">🔍</a></td></tr>
</tbody></table>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
